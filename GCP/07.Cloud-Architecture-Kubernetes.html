<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Qwiklabs - Kubernetes를 통한 클라우드 조정 | Today Youngjun learned✍</title>
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="icon" href="/til/images/logo-144.png">
    <link rel="manifest" href="/til/manifest.json">
    <meta name="description" content="Youngjun`s Personal Wiki (Today I Learned)">
    
    <link rel="preload" href="/til/assets/css/0.styles.5b85764b.css" as="style"><link rel="preload" href="/til/assets/js/app.bfbfa927.js" as="script"><link rel="preload" href="/til/assets/js/2.f827bc55.js" as="script"><link rel="preload" href="/til/assets/js/37.d923853e.js" as="script"><link rel="preload" href="/til/assets/js/46.01e6df54.js" as="script"><link rel="prefetch" href="/til/assets/js/10.d7bebace.js"><link rel="prefetch" href="/til/assets/js/100.5789d20a.js"><link rel="prefetch" href="/til/assets/js/101.c34422c8.js"><link rel="prefetch" href="/til/assets/js/102.5669c6e9.js"><link rel="prefetch" href="/til/assets/js/103.5bfa6597.js"><link rel="prefetch" href="/til/assets/js/104.80865abc.js"><link rel="prefetch" href="/til/assets/js/105.d4b6ee29.js"><link rel="prefetch" href="/til/assets/js/106.bfc58b9a.js"><link rel="prefetch" href="/til/assets/js/107.94230b50.js"><link rel="prefetch" href="/til/assets/js/108.5f216130.js"><link rel="prefetch" href="/til/assets/js/109.51e245f9.js"><link rel="prefetch" href="/til/assets/js/11.af453223.js"><link rel="prefetch" href="/til/assets/js/110.8ca4309a.js"><link rel="prefetch" href="/til/assets/js/111.bc804496.js"><link rel="prefetch" href="/til/assets/js/112.c60a0917.js"><link rel="prefetch" href="/til/assets/js/113.830f3786.js"><link rel="prefetch" href="/til/assets/js/114.d3993c2e.js"><link rel="prefetch" href="/til/assets/js/115.b4929715.js"><link rel="prefetch" href="/til/assets/js/116.1fd08ec1.js"><link rel="prefetch" href="/til/assets/js/117.2a1c47b1.js"><link rel="prefetch" href="/til/assets/js/118.38ba08b9.js"><link rel="prefetch" href="/til/assets/js/119.320ea3f4.js"><link rel="prefetch" href="/til/assets/js/12.a3d5f9cc.js"><link rel="prefetch" href="/til/assets/js/120.a585aa3b.js"><link rel="prefetch" href="/til/assets/js/121.2c826722.js"><link rel="prefetch" href="/til/assets/js/122.da4f6f2f.js"><link rel="prefetch" href="/til/assets/js/123.6aca698b.js"><link rel="prefetch" href="/til/assets/js/124.ce2b3f2e.js"><link rel="prefetch" href="/til/assets/js/125.7606400e.js"><link rel="prefetch" href="/til/assets/js/126.39b878a4.js"><link rel="prefetch" href="/til/assets/js/127.c453aa60.js"><link rel="prefetch" href="/til/assets/js/128.afb353a5.js"><link rel="prefetch" href="/til/assets/js/129.cfdec7bb.js"><link rel="prefetch" href="/til/assets/js/13.36b91a88.js"><link rel="prefetch" href="/til/assets/js/130.a2dcc955.js"><link rel="prefetch" href="/til/assets/js/131.37112240.js"><link rel="prefetch" href="/til/assets/js/132.6b6b543d.js"><link rel="prefetch" href="/til/assets/js/133.e65111ff.js"><link rel="prefetch" href="/til/assets/js/134.eb6a431a.js"><link rel="prefetch" href="/til/assets/js/135.a6941348.js"><link rel="prefetch" href="/til/assets/js/136.654d66c8.js"><link rel="prefetch" href="/til/assets/js/137.980efe26.js"><link rel="prefetch" href="/til/assets/js/138.71127e4d.js"><link rel="prefetch" href="/til/assets/js/139.3d84eea7.js"><link rel="prefetch" href="/til/assets/js/14.21d198f0.js"><link rel="prefetch" href="/til/assets/js/140.e7cad63e.js"><link rel="prefetch" href="/til/assets/js/141.a60a4e88.js"><link rel="prefetch" href="/til/assets/js/142.5973a54e.js"><link rel="prefetch" href="/til/assets/js/143.ea3dd2a6.js"><link rel="prefetch" href="/til/assets/js/15.a0350cec.js"><link rel="prefetch" href="/til/assets/js/16.6ccf773c.js"><link rel="prefetch" href="/til/assets/js/17.92966275.js"><link rel="prefetch" href="/til/assets/js/18.0d484a85.js"><link rel="prefetch" href="/til/assets/js/19.ce64e38d.js"><link rel="prefetch" href="/til/assets/js/20.5c8846a0.js"><link rel="prefetch" href="/til/assets/js/21.2e485fd8.js"><link rel="prefetch" href="/til/assets/js/22.083d91dc.js"><link rel="prefetch" href="/til/assets/js/23.a79ef9c9.js"><link rel="prefetch" href="/til/assets/js/24.1c53e189.js"><link rel="prefetch" href="/til/assets/js/25.43488937.js"><link rel="prefetch" href="/til/assets/js/26.cfda8508.js"><link rel="prefetch" href="/til/assets/js/27.04675916.js"><link rel="prefetch" href="/til/assets/js/28.201dabcb.js"><link rel="prefetch" href="/til/assets/js/29.229f0abe.js"><link rel="prefetch" href="/til/assets/js/3.523a327b.js"><link rel="prefetch" href="/til/assets/js/30.f00fd4d5.js"><link rel="prefetch" href="/til/assets/js/31.e2302d67.js"><link rel="prefetch" href="/til/assets/js/32.20d8b662.js"><link rel="prefetch" href="/til/assets/js/33.ae5e8e46.js"><link rel="prefetch" href="/til/assets/js/34.32525616.js"><link rel="prefetch" href="/til/assets/js/35.c2833f9c.js"><link rel="prefetch" href="/til/assets/js/36.7df57647.js"><link rel="prefetch" href="/til/assets/js/38.d261d060.js"><link rel="prefetch" href="/til/assets/js/39.239a50af.js"><link rel="prefetch" href="/til/assets/js/4.45c650f4.js"><link rel="prefetch" href="/til/assets/js/40.2d9bc2a1.js"><link rel="prefetch" href="/til/assets/js/41.caa07bae.js"><link rel="prefetch" href="/til/assets/js/42.45690ce9.js"><link rel="prefetch" href="/til/assets/js/43.825c1580.js"><link rel="prefetch" href="/til/assets/js/44.a1853fe4.js"><link rel="prefetch" href="/til/assets/js/45.c5347b78.js"><link rel="prefetch" href="/til/assets/js/47.1fbcadb6.js"><link rel="prefetch" href="/til/assets/js/48.2b9b1509.js"><link rel="prefetch" href="/til/assets/js/49.494fbd72.js"><link rel="prefetch" href="/til/assets/js/5.0aa337fe.js"><link rel="prefetch" href="/til/assets/js/50.b3e0241f.js"><link rel="prefetch" href="/til/assets/js/51.497b25e7.js"><link rel="prefetch" href="/til/assets/js/52.079e17c0.js"><link rel="prefetch" href="/til/assets/js/53.d15109f5.js"><link rel="prefetch" href="/til/assets/js/54.d9dc8d80.js"><link rel="prefetch" href="/til/assets/js/55.989f2527.js"><link rel="prefetch" href="/til/assets/js/56.5b7c8e8e.js"><link rel="prefetch" href="/til/assets/js/57.7b163896.js"><link rel="prefetch" href="/til/assets/js/58.2ca7da5b.js"><link rel="prefetch" href="/til/assets/js/59.926b192a.js"><link rel="prefetch" href="/til/assets/js/6.52e5f234.js"><link rel="prefetch" href="/til/assets/js/60.221c2169.js"><link rel="prefetch" href="/til/assets/js/61.d1814565.js"><link rel="prefetch" href="/til/assets/js/62.2c62fe16.js"><link rel="prefetch" href="/til/assets/js/63.64d19172.js"><link rel="prefetch" href="/til/assets/js/64.45e22399.js"><link rel="prefetch" href="/til/assets/js/65.4c350e04.js"><link rel="prefetch" href="/til/assets/js/66.5a834cf8.js"><link rel="prefetch" href="/til/assets/js/67.d1c48057.js"><link rel="prefetch" href="/til/assets/js/68.77fbd198.js"><link rel="prefetch" href="/til/assets/js/69.90e61771.js"><link rel="prefetch" href="/til/assets/js/7.21123317.js"><link rel="prefetch" href="/til/assets/js/70.a784e544.js"><link rel="prefetch" href="/til/assets/js/71.493fbe0d.js"><link rel="prefetch" href="/til/assets/js/72.3746d801.js"><link rel="prefetch" href="/til/assets/js/73.289e070e.js"><link rel="prefetch" href="/til/assets/js/74.26c52c69.js"><link rel="prefetch" href="/til/assets/js/75.cf19f8d1.js"><link rel="prefetch" href="/til/assets/js/76.c3b42ac9.js"><link rel="prefetch" href="/til/assets/js/77.aa7da66b.js"><link rel="prefetch" href="/til/assets/js/78.896bd633.js"><link rel="prefetch" href="/til/assets/js/79.272c621f.js"><link rel="prefetch" href="/til/assets/js/8.bc2662d1.js"><link rel="prefetch" href="/til/assets/js/80.8488b5a6.js"><link rel="prefetch" href="/til/assets/js/81.edc4bc43.js"><link rel="prefetch" href="/til/assets/js/82.c38528d6.js"><link rel="prefetch" href="/til/assets/js/83.3faadb6e.js"><link rel="prefetch" href="/til/assets/js/84.d8a552da.js"><link rel="prefetch" href="/til/assets/js/85.55f502c3.js"><link rel="prefetch" href="/til/assets/js/86.c493861b.js"><link rel="prefetch" href="/til/assets/js/87.1bb57bd2.js"><link rel="prefetch" href="/til/assets/js/88.2d238be1.js"><link rel="prefetch" href="/til/assets/js/89.81f41fd8.js"><link rel="prefetch" href="/til/assets/js/9.1d59b63f.js"><link rel="prefetch" href="/til/assets/js/90.db78fbe7.js"><link rel="prefetch" href="/til/assets/js/91.9074b2eb.js"><link rel="prefetch" href="/til/assets/js/92.57b5abb5.js"><link rel="prefetch" href="/til/assets/js/93.325238be.js"><link rel="prefetch" href="/til/assets/js/94.b9819f7d.js"><link rel="prefetch" href="/til/assets/js/95.2bd5be66.js"><link rel="prefetch" href="/til/assets/js/96.f7ec3a35.js"><link rel="prefetch" href="/til/assets/js/97.f6c12817.js"><link rel="prefetch" href="/til/assets/js/98.542b0796.js"><link rel="prefetch" href="/til/assets/js/99.cc724f32.js">
    <link rel="stylesheet" href="/til/assets/css/0.styles.5b85764b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/til/" class="home-link router-link-active"><!----> <span class="site-name">Today Youngjun learned✍</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://github.com/jun108059/til" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://dev-youngjun.tistory.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://github.com/jun108059/til" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://dev-youngjun.tistory.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>🎨 Elasticsearch</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>🐳 Docker</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>🐋 Kubernetes</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>📘 Flutter</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>📗 GCP</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/til/GCP/00.GCP-basic-terms.html" class="sidebar-link">GCP 용어 정리</a></li><li><a href="/til/GCP/01.GCP-Essentials-Qwiklabs.html" class="sidebar-link">GCP Essentials - Qwiklabs 실습 개요</a></li><li><a href="/til/GCP/02.GCP-Essentials-make-VM.html" class="sidebar-link">GCP Essentials - 가상 머신 만들기 실습</a></li><li><a href="/til/GCP/03.GCP-Essentials-CloudShell+gcloud.html" class="sidebar-link">GCP Essentials - Cloud Shell 및 gcloud 시작하기</a></li><li><a href="/til/GCP/04.GCP-Essentials-Kubernetes-Engine.html" class="sidebar-link">GCP Essentials - Kubernetes Engine 사용하기</a></li><li><a href="/til/GCP/06.Cloud-Architecture.html" class="sidebar-link">Qwiklabs - Cloud Architecture</a></li><li><a href="/til/GCP/07.Cloud-Architecture-Kubernetes.html" aria-current="page" class="active sidebar-link">Qwiklabs - Kubernetes를 통한 클라우드 조정</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>📙 Machine Learning</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>📕 Git</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>💚 Data Structure</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>💝 Java</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>💙 Kubeflow</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>🖤 News</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>💜 NGINX</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>🤍 Spring</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>🤎 System Programming</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>💛 UX&amp;UI</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>💕 Web</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>📌 etc</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="qwiklabs-kubernetes를-통한-클라우드-조정"><a href="#qwiklabs-kubernetes를-통한-클라우드-조정" class="header-anchor">#</a> Qwiklabs - Kubernetes를 통한 클라우드 조정</h1> <blockquote data-ke-style="style3" style="font-size:1.12em;"><b>Qwiklabs Cloud Architecture 실습 목차<br></b><a href="https://dev-youngjun.tistory.com/48" target="_blank" rel="noopener">(1) 2020/04/17 - [GCP] - Qwiklabs - Cloud Architecture</a><br><b>(2) 2020/04/18 - [GCP] - Qwiklabs - Kubernetes를 통한 클라우드 조정</b></blockquote> <p><img src="data:image/png;base64,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" alt="img"></p> <p>🔺Qwiklabs - badge</p> <p> </p> <p><span>Qwiklabs의 Cloud Architecture Quest를 수강하며 작성한 포스팅이다.</span></p> <p>첫 번째 실습인<span> </span><span style="background-color:#f6e199;"><b>[Kubernetes를 통한 클라우드 조정]</b></span><span> </span>Quest를 실습해보자.</p> <p><img src="/til/assets/img/gcp-gcloud-02.4374ea0e.png" alt="img"></p> <p>🔺Google Cloud Self-Paced Labs 대표 사진</p> <h2><span style="background-color:#99cefa;">개요</span></h2> <p style="font-size:1.12em;"><b>Google Cloud Shell</b>에서는?</p> <ul style="list-style-type:disc;"><li><span style="background-color:#dddddd;">gcloud</span><span> </span>명령줄을 사용하여<span> </span><span style="color:#ee2323;">Google Cloud Platform에 호스팅된 컴퓨팅 리소스에 액세스</span>할 수 있다.</li> <li>Cloud Shell은<span> </span><b>Debian 기반 가상 머신</b>으로, 영구적인 5GB 홈 디렉터리를 제공하여<span> </span><span style="color:#ee2323;">GCP 프로젝트와 리소스를 원활하게 관리</span>할 수 있도록 한다.</li> <li>Cloud SDK<span> </span><span style="background-color:#dddddd;">gcloud</span>와 필요한 기타 유틸리티는 Cloud Shell에 사전 설치되어 있으므로 간단하게 시작하고 실행할 수 있다</li></ul> <p>이 실습에서는 다음 작업을 실행하는 방법을 학습합니다.</p> <ul><li><a href="https://cloud.google.com/container-engine">Kubernetes Engine</a>을 사용하여 <b>완전한<span> </span><a href="http://kubernetes.io/">Kubernetes</a><span> </span>클러스터를 프로비저닝</b>합니다.</li> <li>kubectl을 사용하여 <b>Docker 컨테이너를 배포하고 관리</b>합니다.</li> <li>Kubernetes의 <b>디플로이먼트 및 서비스를 사용하여 애플리케이션을 마이크로서비스로 분할</b>합니다.</li></ul> <p>Kubernetes는 애플리케이션에 중점을 둡니다. 이 실습 부분에서는 'app'이라는 예제 애플리케이션을 사용하여 실습을 완료합니다.</p> <blockquote data-ke-style="style3"><a href="https://github.com/kelseyhightower/app">App</a>은 Github에서 호스팅되며 12요소 예시 애플리케이션을 제공합니다. 이 실습에서는 다음 Docker 이미지를 다룹니다.<br><br><a href="https://hub.docker.com/r/kelseyhightower/monolith" style="letter-spacing:0px;">(1) kelseyhightower/monolith</a><span style="color:#333333;letter-spacing:0px;"> </span><span style="color:#333333;letter-spacing:0px;">- 모놀리식에 auth 및 hello 서비스 포함<br></span><a href="https://hub.docker.com/r/kelseyhightower/auth" style="letter-spacing:0px;">(2) kelseyhightower/auth</a><span style="color:#333333;letter-spacing:0px;"> </span><span style="color:#333333;letter-spacing:0px;">- auth 마이크로서비스로, 인증된 사용자를 위한 JWT 토큰 생성<br></span><a href="https://hub.docker.com/r/kelseyhightower/hello" style="letter-spacing:0px;">(3) kelseyhightower/hello</a><span style="color:#333333;letter-spacing:0px;"> </span><span style="color:#333333;letter-spacing:0px;">- hello 마이크로서비스로, 인증된 사용자를 안내<br></span><a href="https://hub.docker.com/_/nginx" style="letter-spacing:0px;">(4) ngnix</a><span style="color:#333333;letter-spacing:0px;"> </span><span style="color:#333333;letter-spacing:0px;">- auth 및 hello 서비스의 프런트엔드<br></span><b></b></blockquote> <p><img src="/til/assets/img/gcp-gcloud-03.b94e5cc0.png" alt="img"></p> <p>🔺 Kubernetes</p> <p><b>Kubernetes는<span> </span><a href="http://kubernetes.io/">kubernetes.io</a>에서 사용할 수 있는 오픈소스 프로젝트이며 노트북에서 고가용성 다중 노드 클러스터, 공용 클라우드에서 온프레미스 배포, 가상 머신에서 베어 메탈까지 다양한 환경에서 실행 가능합니다.</b></p> <p>이 실습에서는 Kubernetes Engine과 같은 관리 환경을 사용하여 기본 인프라를 설정하기보다는 Kubernetes를 경험하는 데 집중합니다.</p> <p> </p> <p> </p> <h2><span style="background-color:#99cefa;">설정 및 요구사항</span></h2> <p data-ke-size="size16" style="font-size:1.12em;"><b>Qwiklabs 설정</b></p> <p data-ke-size="size16" style="font-size:1.12em;"> </p> <p><span style="background-color:#f6e199;"><b>실습 시작 버튼을 클릭하기 전에</b></span></p> <p> </p> <p>다음 안내를 확인하자!</p> <ul style="list-style-type:disc;"><li>실습에는 시간 제한이 있으며 일시 중지할 수 없다.</li> <li>실습 시작을 클릭하면 타이머가 시작되고 Cloud 리소스를 사용할 수 있는 시간이 얼마나 남았는지 표시된다.</li></ul> <p>Qwiklabs 실습을 통해 시뮬레이션이나 데모 환경이 아닌<span> </span><b>실제 클라우드 환경에서 직접 실습 활동을 진행</b>할 수 있다. 실습 시간 동안 Google Cloud Platform에 로그인하고 액세스 하는 데 사용할 수 있는<span> </span><b>새로운 임시 사용자 인증 정보가 제공된다</b>.</p> <p> </p> <p><span style="background-color:#f6e199;"><b>준비할 사항</b></span></p> <p> </p> <p>이 실습을 완료하려면 다음을 준비해야 한다.</p> <ul><li>표준 인터넷 브라우저(Chrome 브라우저 권장)</li> <li>실습을 완료할 시간</li></ul> <blockquote data-ke-style="style2"><b>참고:</b><span> </span>이미 개인용 GCP 계정이나 프로젝트가 있어도 이 실습에서는 사용하지 마세요!</blockquote> <p> </p> <p><span style="background-color:#f6e199;"><b>실습을 시작하고 콘솔에 로그인하는 방법</b></span></p> <p> </p> <p> </p> <p>(1)<span> </span><b>실습 시작</b><span> </span>버튼을 클릭합니다. 실습 비용을 결제해야 하는 경우 결제 수단을 선택할 수 있는 팝업이 열린다. 왼쪽에 있는 패널에서 이 실습에 사용해야 하는 임시 사용자 인증 정보를 확인할 수 있다.</p> <p>[##_Image|kage@oBcV2/btqDviioUXF/lI5hb7ywqQZnl02zLdbqj0/img.png|alignCenter|data-origin-width=&quot;272&quot; data-origin-height=&quot;337&quot;|실습 시작을 누르면 로그인 정보를 준다.||_##]</p> <p>(2) 사용자 이름을 복사한 다음<span> </span><b>Google 콘솔 열기</b>를 클릭하자. 실습에서 리소스가 실행되며<span> </span><b>계정 선택</b><span> </span>페이지를 표시하는 다른 탭이 열린다.</p> <blockquote data-ke-style="style2"><b>팁:</b><span> </span>두 탭은 각각 별도의 창에 나란히 여세요.</blockquote> <p>[##_Image|kage@AG8Pz/btqDvyFk4IO/pzWIJP3nBdljyK60NTLGI0/img.png|alignCenter|width=&quot;384&quot; height=&quot;457&quot; data-origin-width=&quot;474&quot; data-origin-height=&quot;564&quot;|로그인 정보에 위에서 받은 정보를 입력하자||_##]</p> <p> </p> <p>(3) 만약 계정 선택 페이지에 로그인 되어있다면<span> </span><b>다른 계정 사용</b>을 클릭!</p> <p> </p> <p>(4) 로그인 페이지가 위와 같이 열리면 연결 세부 정보<b><span> </span>패널에서 복사한 사용자 이름과 비밀번호를 붙여 넣자.</b></p> <p> </p> <blockquote data-ke-style="style2"><b>중요:</b><span> </span>연결 세부 정보 패널에 표시된 사용자 인증 정보를 사용해야 합니다. 본인의 Qwiklabs 사용자 인증 정보를 사용하지 마세요. 이미 개인용 GCP 계정이 있어도 이 실습에서 사용하지 마세요<span style="color:#ee2323;">(요금 청구 방지)</span>.</blockquote> <p>(5) 이후에 표시되는 페이지를 클릭하여 넘기자.</p> <ul><li>이용약관에 동의</li> <li>임시 계정이므로 복구 옵션이나 2단계 인증을 추가하지 않음(CONFIRM)</li> <li>무료 평가판을 신청하지 않는다.</li></ul> <p>[##_Image|kage@bTCrxi/btqDtzEZhWp/0xLcWXYHCy3C1oAqFCKoi1/img.png|alignCenter|data-origin-width=&quot;763&quot; data-origin-height=&quot;412&quot;|이용약관과 복구 옵션은 스킵한다.(CONFIRM을 누르면 된다)||_##]</p> <p>잠시 후<span> </span><span style="background-color:#dddddd;">GCP Console</span>이 이 탭에서 열린다.</p> <p>[##_Image|kage@nzxPj/btqDwD0dlNe/KEyh3J0nXSKSWgEy35vvyk/img.png|alignCenter|width=&quot;426&quot; height=&quot;482&quot; data-origin-width=&quot;571&quot; data-origin-height=&quot;648&quot;|GCP Console에서 환영해준다.||_##]</p> <p>왼쪽 상단에 탐색 메뉴를 클릭해서 메뉴를 살펴보자!</p> <p>[##_Image|kage@bTCa6b/btqDwELAF1J/93beK83ZiMPQv0PtcpNuaK/img.png|alignCenter|data-origin-width=&quot;662&quot; data-origin-height=&quot;220&quot;|탐색 메뉴는 좌측 상단에 있다.||_##]</p> <p> </p> <p> </p> <h2><span style="background-color:#99cefa;">Google Cloud Shell 활성화하기</span></h2> <p> </p> <p style="font-size:1.12em;"><b><span style="background-color:#f6e199;">Google Cloud Shell</span>은?</b></p> <blockquote data-ke-style="style3">다양한 개발 도구가 탑재된 가상 머신</blockquote> <ul style="list-style-type:disc;"><li>5GB의 영구 홈 디렉터리를 제공하며 Google Cloud에서 실행된다.</li> <li>Google Cloud Shell을 사용하면 명령줄을 통해 GCP 리소스에 액세스 할 수 있다.</li></ul> <p> </p> <p>(1) GCP Console의 오른쪽 상단 툴바에서<span> </span><b>Cloud Shell 열기</b><span> </span>버튼을 클릭하자.</p> <p>[##_Image|kage@cjMUJK/btqDvibCcw4/EohYFjimaKaK6DdMVhJDrk/img.png|alignCenter|data-origin-width=&quot;902&quot; data-origin-height=&quot;324&quot;|오른쪽 상탄 툴바에서 Console을 열 수 있다.||_##]</p> <p><span>(2)<span> </span></span><b>Continue를</b><span><span> </span>클릭하자.</span></p> <p>[##_Image|kage@NXIik/btqDtAKBI5e/6mIlGNMJ4nffAtskMlm78k/img.png|alignCenter|data-origin-width=&quot;648&quot; data-origin-height=&quot;276&quot;|||_##]</p> <p><span>환경을 프로비저닝하고 연결하는 데 약간의 시간이 걸린다.</span></p> <p><span>연결되면 이미 인증되었으며 프로젝트는<span> </span><b>PROJECT_ID </b>PROJECT_ID로 설정된다.</span></p> <p> </p> <p>[##_Image|kage@GKb2z/btqDwEEOF89/NqIUIUahOL3zXpUWdUd8W0/img.png|alignCenter|data-origin-width=&quot;963&quot; data-origin-height=&quot;268&quot;|프로젝트 ID가 보인다!||_##]</p> <p style="font-size:1.12em;"><span style="background-color:#f6e199;"><b>gcloud는?</b></span></p> <blockquote data-ke-style="style3"><span> Google Cloud Platform의 명령줄 도구</span></blockquote> <p><span><b>Cloud Shell에 사전 설치</b>되어 있으며<span> </span><span style="color:#ee2323;">탭 자동 완성을 지원</span>한다!</span></p> <p> </p> <p><span>가장 간단한 명령어를 살펴보자.</span></p> <p> </p> <p><b><span>(1) 사용 중인 계정 이름 목록 확인</span></b></p> <pre id="code_1587054779004" data-ke-language="go" data-ke-type="codeblock" class="go" style="margin:20px auto 0px;display:block;overflow:auto;padding:15px;color:#383a42;background:#f6f7f8;font-size:14px;border-radius:3px;font-family:Menlo, Consolas, Monaco, monospace;border:1px solid #dddddd;cursor:default;z-index:1;"><code>gcloud auth list</code></pre> <p><b>(2) 프로젝트 ID 목록 확인</b></p> <pre id="code_1587054779004" data-ke-language="go" data-ke-type="codeblock" class="go" style="margin:20px auto 0px;display:block;overflow:auto;padding:15px;color:#383a42;background:#f6f7f8;font-size:14px;border-radius:3px;font-family:Menlo, Consolas, Monaco, monospace;border:1px solid #dddddd;cursor:default;z-index:1;"><code>glcoud config list project</code></pre> <p>[##_Image|kage@bbeKUo/btqDwdObs2o/1LT2718kFzTnNZWWKHKUG0/img.png|alignCenter|data-origin-width=&quot;0&quot; data-origin-height=&quot;0&quot;|실제로 Shell에서 실행하면 다음과 같이 출력된다.||_##]</p> <blockquote data-ke-style="style3"><b>gcloud</b><span> </span>관련 전체 설명서는<span> </span><a href="https://cloud.google.com/sdk/gcloud">Google Cloud gcloud 개요에서</a><span> </span>확인할 수 있다.</blockquote> <p> </p> <h3><span style="background-color:#f6e199;"><b>Google Kubernetes Engine</b></span></h3> <p><b>Cloud Shell 환경에서 다음 명령어를 입력하여 영역을 설정합니다.</b></p> <p> </p> <pre id="code_1587054866424" data-ke-language="go" data-ke-type="codeblock" class="go"><code>gcloud config set compute/zone us-central1-b</code></pre> <p> </p> <p>영역 설정 후 이 실습에 사용할 클러스터를 시작합니다.</p> <pre id="code_1587054879111" data-ke-language="go" data-ke-type="codeblock" class="go"><code>gcloud container clusters create io</code></pre> <p>[##_Image|kage@rlFcw/btqDvhRjPKU/WjBcv6WUbWOnHtNny1BCxk/img.png|alignCenter|data-filename=&quot;kubernetes-클라우드-조정(5).png&quot; data-origin-width=&quot;1371&quot; data-origin-height=&quot;430&quot;|가상 머신을 프로비저닝하기 때문에 클러스터를 만드는데 시간이 조금 걸린다.||_##]</p> <blockquote data-ke-style="style2"><b>참고:</b><span> </span>Kubernetes Engine이 백그라운드에서 몇몇 가상 머신을 프로비저닝하고 있으므로 클러스터를 만드는 데 다소 시간이 걸립니다.</blockquote> <h2 id="step4"><span style="background-color:#99cefa;">샘플 코드 가져오기</span></h2> <p>Cloud Shell 명령줄에서 GitHub 저장소를 클론합니다.</p> <p> </p> <pre id="code_1587054912608" data-ke-language="go" data-ke-type="codeblock" class="go"><code>git clone https://github.com/googlecodelabs/orchestrate-with-kubernetes.git</code></pre> <pre id="code_1587054926624" data-ke-language="go" data-ke-type="codeblock" class="go"><code>cd orchestrate-with-kubernetes/kubernetes</code></pre> <p>파일을 나열하여 작업 중인 파일을 확인합니다.</p> <pre id="code_1587054932510" data-ke-language="go" data-ke-type="codeblock" class="go"><code>ls</code></pre> <p>샘플의 레이아웃은 다음과 같습니다.</p> <pre id="code_1587054954016" data-ke-language="go" data-ke-type="codeblock" class="go"><code>deployments/  /* 디플로이먼트 매니페스트  */
  ...
nginx/        /* nginx 구성 파일 */
  ...
pods/         /* 포드 매니페스트 */
  ...
services/     /* 서비스 매니페스트 */
  ...
tls/          /* TLS 인증서 */
  ...
cleanup.sh    /* 정리 스크립트 */</code></pre> <p>[##_Image|kage@chUTu9/btqDwE5S4Ab/vfnnwzDN5cyZY8YRmFe9jK/img.png|alignCenter|data-filename=&quot;kubernetes-클라우드-조정(6).png&quot; data-origin-width=&quot;1368&quot; data-origin-height=&quot;251&quot;|실제로 샘플이 확인된다.||_##]</p> <p> </p> <p>코드를 가져왔으므로 이제 Kubernetes를 사용해 보겠습니다.</p> <h2 id="step5"><span style="background-color:#99cefa;">간략한 Kubernetes 데모</span></h2> <p>Kubernetes를 시작하는 가장 쉬운 방법은<span> </span>kubectl create<span> </span>명령어를 사용하는 것입니다. 이를 사용하여 nginx 컨테이너의 단일 인스턴스를 실행합니다.</p> <pre id="code_1587055059263" data-ke-language="go" data-ke-type="codeblock" class="go"><code>kubectl create deployment nginx --image=nginx:1.10.0</code></pre> <p> </p> <p>Kubernetes가 배포를 생성했습니다. 배포에 관해서는 나중에 다시 설명드리겠습니다.</p> <p> </p> <p>지금 알아야 하는 점은 배포 덕분에 pod가 작동하고 있으며, pod가 실행하는 노드에 오류가 발생해도 계속해서 작동한다는 점입니다.</p> <p> </p> <p>Kubernetes에서 모든 컨테이너는 포드에서 실행됩니다.<span> </span><span style="background-color:#dddddd;">kubectl get pods</span><span> </span>명령어를 사용하여 실행 중인 nginx 컨테이너를 확인합니다.</p> <pre id="code_1587055098459" data-ke-language="go" data-ke-type="codeblock" class="go"><code>kubectl get pods</code></pre> <p>[##_Image|kage@JGvih/btqDweGnIt5/fVBlTzD6982PH2YRHM5A30/img.png|alignCenter|data-origin-width=&quot;0&quot; data-origin-height=&quot;0&quot;|get pods로 nginx 컨테이너를 확인했다.||_##]</p> <p>nginx 컨테이너가 실행되면<span> </span>kubectl expose<span> </span>명령어를 사용하여 Kubernetes 외부로 노출시킬 수 있습니다.</p> <pre id="code_1587055113040" data-ke-language="go" data-ke-type="codeblock" class="go"><code>kubectl expose deployment nginx --port 80 --type LoadBalancer</code></pre> <p> </p> <p>방금 무슨 일이 일어났을까요? Kubernetes가 백그라운드에서 공개 IP 주소가 첨부된 외부 부하 분산기를 만들었습니다. 이 공개 IP 주소를 조회하는 모든 클라이언트는 서비스 백그라운드에 있는 포드로 라우팅됩니다. 이 경우에는 nginx 포드로 라우팅됩니다.</p> <p> </p> <p>이제<span style="background-color:#dddddd;"> kubectl get services </span>명령어를 사용하여 서비스를 나열합니다.</p> <pre id="code_1587055136680" data-ke-language="go" data-ke-type="codeblock" class="go"><code>kubectl get services</code></pre> <p> </p> <blockquote data-ke-style="style2"><b>참고:</b><span> </span>서비스를 위해<span> </span>ExternalIP<span> </span>필드가 채워지는 데는 몇 초 정도 소요될 수 있습니다. 이는 정상적인 현상입니다. 필드가 채워질 때까지 몇 초마다<span> </span>kubectl get services<span> </span>명령어를 다시 실행합니다.</blockquote> <p>원격으로 Nginx 컨테이너를 조회하려면 이 명령어에 외부 IP를 추가합니다.</p> <pre id="code_1587055161554" data-ke-language="html" data-ke-type="codeblock" class="html xml"><code>curl http://&lt;External IP&gt;:80</code></pre> <p> </p> <p>[##_Image|kage@Q5ApP/btqDsbR6Ccx/H3VTHcP8J69gCuVMHLKABk/img.png|alignCenter|data-filename=&quot;kubernetes-클라우드-조정(8).png&quot; data-origin-width=&quot;987&quot; data-origin-height=&quot;696&quot;|get services로 nginx의 External IP를 확인해 조회해보았다.||_##]</p> <p>이제 됐습니다. Kubernetes는<span> </span>kubectl<span> </span>실행 및 노출 명령어로 바로 사용할 수 있는 간편한 워크플로를 지원합니다.</p> <p> </p> <h3>완료된 작업 테스트하기</h3> <p>아래의<span> </span><b>내 진행 상황 확인하기</b>를 클릭하여 실습 진행 상황을 확인합니다. Kubernetes 클러스터를 완성하고 Nginx 컨테이너를 배포하면 평가 점수가 표시됩니다.</p> <p>[##_Image|kage@pb9vp/btqDvZvS5Ah/o7QzxOMvE0tHN12V3QN6k1/img.png|alignCenter|data-filename=&quot;kubernetes-클라우드-조정(9).png&quot; data-origin-width=&quot;511&quot; data-origin-height=&quot;120&quot;|||_##]</p> <p><span>Kubernetes를 간단하게 둘러보았으니 각 구성요소와 추상화를 파헤쳐 보겠습니다.</span></p> <p> </p> <h2 data-ke-size="size26"> </h2> <h2 id="step6"><span style="background-color:#99cefa;">포드</span></h2> <p><span style="color:#ee2323;">Kubernetes의 핵심에는 <a href="http://kubernetes.io/docs/user-guide/pods/" style="color:#ee2323;">포드</a>가 있습니다.</span></p> <p> </p> <p>포드는 <span style="background-color:#f6e199;">1개 이상의 컨테이너가 포함된 모음</span>을 나타냅니다. 일반적으로 상호 의존성이 높은 컨테이너가 여러 개 있으면 이를 하나의 포드에 패키징합니다.</p> <p>[##_Image|kage@cxfJEQ/btqDvzc9VTc/s76RNqBkwvnng7GAMitCo1/img.jpg|alignCenter|data-origin-width=&quot;0&quot; data-origin-height=&quot;0&quot; width=&quot;583&quot; height=&quot;328&quot;|pod 설명||_##]</p> <p>이 예시에는 모놀리식 및 nginx 컨테이너가 포함된 포드가 있습니다.</p> <p> </p> <p>포드에는<span> </span><a href="http://kubernetes.io/docs/user-guide/volumes/">볼륨</a><span> </span>또한 포함되어 있습니다. <b><span style="background-color:#f6e199;">볼륨</span>은 포드가 존재하는 한 계속해서 존재하는 데이터 디스크</b>이며 포드에 포함된 컨테이너에 의해 사용될 수 있습니다. 포드는 콘텐츠에 공유된<b><span style="background-color:#f6e199;"> 네임스페이스</span>를 제공</b>합니다. 즉, 이 예시의 포드 안에 있는 2개의 컨테이너는 서로 통신할 수 있으며 첨부된 볼륨도 공유합니다.</p> <p> </p> <p>또한 포드는 <b>네트워크 네임스페이스도 공유</b>합니다. 즉, 포드는 IP 주소를 1개씩 갖고 있습니다.</p> <p>이제 포드에 관해 더 자세히 살펴보겠습니다.</p> <h2 id="step7"><span style="background-color:#99cefa;">포드 만들기</span></h2> <p>포드는 포드 구성 파일을 사용하여 만들 수 있습니다. 모놀리식 포드 구성 파일을 살펴보겠습니다. 다음을 실행해 보세요.</p> <pre id="code_1587055561463" data-ke-language="go" data-ke-type="codeblock" class="go"><code>cat pods/monolith.yaml</code></pre> <p>열린 구성 파일이 출력됩니다.</p> <pre id="code_1587055580153" data-ke-language="go" data-ke-type="codeblock" class="go"><code>apiVersion: v1
kind: Pod
metadata:
  name: monolith
  labels:
    app: monolith
spec:
  containers:
    - name: monolith
      image: kelseyhightower/monolith:1.0.0
      args:
        - &quot;-http=0.0.0.0:80&quot;
        - &quot;-health=0.0.0.0:81&quot;
        - &quot;-secret=secret&quot;
      ports:
        - name: http
          containerPort: 80
        - name: health
          containerPort: 81
      resources:
        limits:
          cpu: 0.2
          memory: &quot;10Mi&quot;</code></pre> <p> </p> <p>여기서 주목해야 할 부분이 몇 군데 있습니다. 다음과 같은 부분을 확인합니다.</p> <ul><li>포드가 1개의 컨테이너(모놀리식)로 구성되어 있습니다.</li> <li>시작할 때 컨테이너로 몇 가지 인수가 전달됩니다.</li> <li>HTTP 트래픽용 포드 80이 개방됩니다.</li></ul> <p><span style="background-color:#dddddd;">kubectl</span>을 사용하여 모놀리식 포드를 만듭니다.</p> <pre id="code_1587055603057" data-ke-language="go" data-ke-type="codeblock" class="go"><code>kubectl create -f pods/monolith.yaml</code></pre> <p> </p> <p style="text-align:left;">포드를 살펴보세요.<span> </span><span style="background-color:#dddddd;">kubectl get pods</span><span> </span>명령어를 사용하여 기본 네임스페이스에서 실행 중인 모든 포드를 나열합니다.</p> <pre id="code_1587055624999" data-ke-language="go" data-ke-type="codeblock" class="go"><code>kubectl get pods</code></pre> <blockquote data-ke-style="style2"><b>참고:</b><span> </span>모놀리식 pod가 작동하는 데는 몇 초 정도 걸릴 수 있습니다. 이를 실행하기 위해 Docker Hub에서 모놀리식 컨테이너 이미지를 가져와야 합니다.</blockquote> <p>포드가 실행되면<span> </span><span style="background-color:#dddddd;">kubectl describe</span><span> </span>명령어를 사용하여 모놀리식 포드에 관해 자세히 알아봅니다.</p> <pre id="code_1587055654362" data-ke-language="go" data-ke-type="codeblock" class="go"><code>kubectl describe pods monolith</code></pre> <p>[##_Image|kage@c6fY62/btqDvYjtIiE/Yx0B94M8kLU87OcUgK0LB0/img.png|alignCenter|data-filename=&quot;kubernetes-클라우드-조정(10).png&quot; data-origin-width=&quot;989&quot; data-origin-height=&quot;519&quot; width=&quot;719&quot; height=&quot;377&quot;|많은 정보를 포함하고 있다! 문제해결 시 유용하다.||_##]</p> <p>포드 IP 주소 및 이벤트 로그를 포함한 모놀리식 포드에 관한 여러 정보가 표시됩니다. 이 정보는 문제해결 시 유용하게 사용됩니다.</p> <p> </p> <p>Kubernetes를 사용하면 구성 파일에 포드에 관해 설명하여 간편하게 포드를 만들 수 있으며, 포드가 실행 중일 때 정보를 쉽게 확인할 수 있습니다. 이제 디플로이먼트에 필요한 모든 포드를 만들 수 있습니다.</p> <h2 id="step8"><span style="background-color:#99cefa;">포드와 상호작용하기</span></h2> <p>포드에는 기본적으로 비공개 IP 주소가 부여되며 클러스터 밖에서는 접근할 수 없습니다.<span> </span><span style="background-color:#dddddd;">kubectl port-forward</span><span> </span>명령어를 사용하여 로컬 포트를 모놀리식 포드 안의 포트로 매핑합니다.</p> <p> </p> <blockquote data-ke-style="style3">이 시점부터 포드 간 통신을 설정하기 위해 실습이 여러 Cloud Shell 탭에서 진행됩니다. 두 번째 또는 세 번째 명령어 셸에서 실행되는 명령어는 명령어 안내에 표시됩니다.</blockquote> <p>Cloud Shell 터미널 2개를 엽니다. 하나는<span style="background-color:#dddddd;"> kubectl port-forward</span><span> </span>명령어를 실행하고 다른 하나는<span> </span><span style="background-color:#dddddd;">curl</span><span> </span>명령어를 실행하기 위한 것입니다.</p> <p> </p> <p><b>두 번째 터미널</b>에서 다음 명령어를 사용하여 포드 전달을 설정합니다.</p> <pre id="code_1587055816185" data-ke-language="go" data-ke-type="codeblock" class="go"><code>kubectl port-forward monolith 10080:80</code></pre> <p> </p> <p><b>첫 번째 터미널</b>에서<span> </span>curl을 사용하여 pod와 통신을 시작합니다.</p> <pre id="code_1587055827336" data-ke-language="html" data-ke-type="codeblock" class="html xml"><code>curl http://127.0.0.1:10080</code></pre> <p>성공입니다. 컨테이너가 친절하게도 'hello'라고 인사를 건넵니다.</p> <p>[##_Image|kage@50D7J/btqDsNpUjNJ/KOcWbKR8mFt1pocwgkB3H0/img.png|alignCenter|data-filename=&quot;kubernetes-클라우드-조정(11).png&quot; data-origin-width=&quot;762&quot; data-origin-height=&quot;101&quot;|Hello를 확인할 수 있다.||_##]</p> <p>이제<span> </span><span style="background-color:#dddddd;">curl</span><span> </span>명령어를 사용하여 보안이 설정된 엔드포인트를 조회하면 어떻게 되는지 살펴보겠습니다.</p> <pre id="code_1587055859496" data-ke-language="html" data-ke-type="codeblock" class="html xml"><code>curl http://127.0.0.1:10080/secure</code></pre> <p>문제가 발생했습니다.</p> <p>[##_Image|kage@cCaq50/btqDvY4PQ0w/VCpNrbkIrCQxoCmI8pfKs1/img.png|alignCenter|data-filename=&quot;kubernetes-클라우드-조정(12).png&quot; data-origin-width=&quot;757&quot; data-origin-height=&quot;99&quot;|인증 실패가 뜬다.||_##]</p> <p>모놀리식에서 다시 인증 토큰을 얻기 위해 로그인을 시도합니다.</p> <pre id="code_1587055869480" data-ke-language="html" data-ke-type="codeblock" class="html xml"><code>curl -u user http://127.0.0.1:10080/login</code></pre> <p>로그인 메시지에서 일급 비밀번호인 'password'를 사용하여 로그인합니다.</p> <p>[##_Image|kage@5zC0p/btqDsNXIarz/k3MLtAb0wUZrJnBk2qdK00/img.png|alignCenter|data-filename=&quot;kubernetes-클라우드-조정(13).png&quot; data-origin-width=&quot;1060&quot; data-origin-height=&quot;85&quot;|암호가 정말 'password'이다.||_##]</p> <p>로그인하여 JWT 토큰이 출력되었습니다. Cloud Shell은 긴 문자열을 제대로 복사하지 못하니 토큰을 위한 환경 변수를 만듭니다.</p> <pre id="code_1587055887218" data-ke-language="html" data-ke-type="codeblock" class="html xml"><code>TOKEN=$(curl http://127.0.0.1:10080/login -u user|jq -r '.token')</code></pre> <p>호스트 비밀번호를 묻는 메시지가 나타나면 일급 비밀번호 'password'를 다시 입력합니다.</p> <p> </p> <p>다음 명령어를 사용하여 토큰을 복사하고, 이 토큰으로<span> </span>curl을 사용하여 보안이 설정된 엔드포인트를 조회합니다.</p> <pre id="code_1587055900112" data-ke-language="html" data-ke-type="codeblock" class="html xml"><code>curl -H &quot;Authorization: Bearer $TOKEN&quot; http://127.0.0.1:10080/secure</code></pre> <p>[##_Image|kage@QPc5E/btqDtzya7UP/Si9JgBYuhTHu3Xn50fy5K0/img.png|alignCenter|data-filename=&quot;kubernetes-클라우드-조정(14).png&quot; data-origin-width=&quot;1040&quot; data-origin-height=&quot;173&quot;|JWT 토큰을 환경 변수로 만든 후 엔드포인트를 조회한다.||_##]</p> <p> </p> <p>이제 애플리케이션으로부터 모두 제대로 작동한다는 응답이 전송될 것입니다.</p> <p><span style="background-color:#dddddd;">kubectl logs</span><span> </span>명령어를 사용하여 모놀리식 포드의 로그를 확인합니다.</p> <pre id="code_1587055921960" data-ke-language="go" data-ke-type="codeblock" class="go"><code>kubectl logs monolith</code></pre> <p>[##_Image|kage@stwmR/btqDvYRkNb3/9CAJYq7vuvtcacp04bJC90/img.png|alignCenter|data-filename=&quot;kubernetes-클라우드-조정(15).png&quot; data-origin-width=&quot;1047&quot; data-origin-height=&quot;347&quot;|Pod의 로그를 확인해보자! 정상 작동 응답을 확인할 수 있다.||_##]</p> <p><b>세 번째 터미널</b>을 열고<span> </span><span style="background-color:#dddddd;">-f</span><span> </span>플래그를 사용하여 실시간 로그 스트림을 가져옵니다.</p> <pre id="code_1587055939168" data-ke-language="go" data-ke-type="codeblock" class="go"><code>kubectl logs -f monolith</code></pre> <p><b>첫 번째 터미널</b>에서<span> </span>curl을 사용하여 모놀리식 pod와 상호작용했다면<span> </span><b>세 번째 터미널</b>에서 로그가 업데이트되는 것을 확인할 수 있습니다.</p> <pre id="code_1587055949624" data-ke-language="html" data-ke-type="codeblock" class="html xml"><code>curl http://127.0.0.1:10080</code></pre> <p>[##_Image|kage@3U3Et/btqDvzqHL5X/qFnwMRkdfMo62jxtzVwc0K/img.png|alignCenter|data-filename=&quot;kubernetes-클라우드-조정(16).png&quot; data-origin-width=&quot;1059&quot; data-origin-height=&quot;456&quot;|세 번째 터미널에서 실시간으로 로그가 업데이트 된다!||_##]</p> <p> </p> <p><span style="background-color:#dddddd;">kubectl exec</span><span> </span>명령어를 사용하여 모놀리식 포드의 대화형 셸을 실행합니다. 이는 컨테이너 내부에서 문제를 해결할 때 유용합니다.</p> <pre id="code_1587055968689" data-ke-language="go" data-ke-type="codeblock" class="go"><code>kubectl exec monolith --stdin --tty -c monolith /bin/sh</code></pre> <p>예를 들어 모놀리식 컨테이너에 셸이 있으면<span> </span>ping<span> </span>명령어를 사용하여 외부 연결을 테스트할 수 있습니다.</p> <pre id="code_1587055977986" data-ke-language="go" data-ke-type="codeblock" class="go"><code>ping -c 3 google.com</code></pre> <p>대화형 셸 사용을 완료한 후에는 반드시 로그아웃합니다.</p> <pre id="code_1587055984305" data-ke-language="go" data-ke-type="codeblock" class="go"><code>exit</code></pre> <p>[##_Image|kage@S6fKy/btqDwe0GdgS/ZkSk1o2okdeDq0PLZcmuC1/img.png|alignCenter|data-origin-width=&quot;0&quot; data-origin-height=&quot;0&quot;|kubectl exec 명령어로 Pod의 대화형 셸을 실행했다!||_##]</p> <p>이와 같이 포드와의 상호작용은<span> </span><span style="background-color:#dddddd;">kubectl</span><span> </span>명령을 사용하는 것만큼 쉽습니다. 원격으로 컨테이너를 조회하거나 로그인 셸이 필요한 경우 Kubernetes가 작업에 필요한 모든 것을 제공합니다.</p> <h2 id="step9"><span style="background-color:#99cefa;">서비스</span></h2> <p>포드는 영구적으로 지속되지 않습니다. 활성 여부 또는 준비 상태 검사 오류와 같은 다양한 이유로 중지되거나 시작될 수 있으며, 이로 인해 문제가 발생합니다.</p> <p> </p> <p>포드 집합과 통신해야 하는 경우 어떻게 해야 할까요? 포드가 다시 시작되면 IP 주소가 바뀔 수도 있습니다.</p> <p> </p> <p>이와 같은 상황에서<span> </span><a href="http://kubernetes.io/docs/user-guide/services/">서비스</a>가 유용합니다. <span style="background-color:#f6e199;">서비스는 포드를 위해 안정적인 엔드포인트를 제공</span>합니다.</p> <p>[##_Image|kage@pUwme/btqDwEY8XaO/kuYeDx44SeHZeqrJ255EY0/img.jpg|alignCenter|data-origin-width=&quot;0&quot; data-origin-height=&quot;0&quot; width=&quot;641&quot; height=&quot;360&quot;|서비스는 Pod를 위해 안정적인 엔드포인트를 제공한다.||_##]</p> <p>서비스는 라벨을 사용하여 어떤 포드에서 작동할지 결정합니다. 포드에 라벨이 정확히 지정되어 있다면 서비스가 이를 자동으로 감지하고 노출시킵니다.</p> <p> </p> <p>서비스가 제공하는 포드 집합에 대한 액세스 수준은 서비스 유형에 따라 다릅니다. 현재 3가지 유형이 있습니다.</p> <ul><li><span style="background-color:#dddddd;">ClusterIP</span>(내부) -- 기본 유형이며 이 서비스는 클러스터 안에서만 볼 수 있습니다.</li> <li><span style="background-color:#dddddd;">NodePort</span><span> </span>클러스터의 각 노드에 외부에서 액세스 가능한 IP 주소를 제공합니다.</li> <li><span style="background-color:#dddddd;">LoadBalancer</span>는 클라우드 제공업체로부터 부하 분산기를 추가하며 서비스에서 유입되는 트래픽을 내부에 있는 노드로 전달합니다.</li></ul> <p>이제 다음 작업을 실행하는 방법을 학습합니다.</p> <ul><li><p>서비스 만들기</p></li> <li><p>라벨 셀랙터를 사용하여 제한된 포드 집합을 외부에 노출하기</p></li></ul> <h2 id="step10"><span style="background-color:#99cefa;">서비스 만들기</span></h2> <p>서비스를 만들기 전에 https 트래픽을 처리할 수 있는 보안이 설정된 포드를 만듭니다.</p> <p> </p> <p>디렉토리를 수정했을 경우<span> </span><span style="background-color:#dddddd;">~/orchestrate-with-kubernetes/kubernetes</span><span> </span>디렉토리로 다시 돌아갑니다.</p> <pre id="code_1587056112079" data-ke-language="go" data-ke-type="codeblock" class="go"><code>cd ~/orchestrate-with-kubernetes/kubernetes</code></pre> <p>모놀리식 서비스 구성 파일을 살펴봅니다.</p> <pre id="code_1587056117536" data-ke-language="go" data-ke-type="codeblock" class="go"><code>cat pods/secure-monolith.yaml</code></pre> <p>보안이 설정된 모놀리식 포드와 구성 데이터를 만듭니다.</p> <pre id="code_1587056123919" data-ke-language="go" data-ke-type="codeblock" class="go"><code>kubectl create secret generic tls-certs --from-file tls/ 
kubectl create configmap nginx-proxy-conf --from-file nginx/proxy.conf 
kubectl create -f pods/secure-monolith.yaml</code></pre> <p>이제 보안이 설정된 포드가 있으니 이를 외부로 노출시킵니다. 이렇게 하기 위해 Kubernetes 서비스를 만듭니다.</p> <p> </p> <p>모놀리식 서비스 구성 파일을 살펴봅니다.</p> <pre id="code_1587056158528" data-ke-language="go" data-ke-type="codeblock" class="go"><code>cat services/monolith.yaml</code></pre> <p>(출력):<span><span></span></span></p> <pre id="code_1587056179857" data-ke-language="go" data-ke-type="codeblock" class="go"><code>kind: Service
apiVersion: v1
metadata:
  name: &quot;monolith&quot;
spec:
  selector:
    app: &quot;monolith&quot;
    secure: &quot;enabled&quot;
  ports:
    - protocol: &quot;TCP&quot;
      port: 443
      targetPort: 443
      nodePort: 31000
  type: NodePort</code></pre> <p>[##_Image|kage@yFXyf/btqDvzKYiJY/leUF7IaROeJ1UWKBM10VP1/img.png|alignCenter|data-filename=&quot;kubernetes-클라우드-조정(18).png&quot; data-origin-width=&quot;1047&quot; data-origin-height=&quot;480&quot;|보안 설정 이후 외부로 노출시켜 Kubernetes 서비스를 만들었다.||_##]</p> <p> </p> <blockquote data-ke-style="style3">참고<br><span style="color:#333333;letter-spacing:0px;">1. 'app=monolith' 및 'secure=enabled' 라벨이 지정된 포드를 자동으로 찾고 노출시키는 선택기가 있습니다.<br></span><span style="color:#333333;letter-spacing:0px;">2. 외부 트래픽을 포트 31000에서 포트 443의 nginx로 전달하기 위해 NodePort를 노출시켜야 합니다.</span></blockquote> <p><span style="background-color:#dddddd;">kubectl create</span><span> </span>명령어를 사용하여 모놀리식 서비스 구성 파일에서 모놀리식 서비스를 만듭니다.</p> <pre id="code_1587056224041" data-ke-language="go" data-ke-type="codeblock" class="go"><code>kubectl create -f services/monolith.yaml</code></pre> <p>(출력):<span><span style="color:#ffffff;"></span></span></p> <pre id="code_1587056234274" data-ke-language="go" data-ke-type="codeblock" class="go"><code>service &quot;monolith&quot; created</code></pre> <h3>완료된 작업 테스트하기</h3> <p>아래의<span> </span><b>내 진행 상황 확인하기</b>를 클릭하여 실습 진행 상황을 확인합니다. 모놀리식 pod를 완성하면 평가 점수가 표시됩니다.</p> <p>[##_Image|kage@cj7gpE/btqDsbxRqWw/uoH2IBT81jDZh76ygh1kaK/img.png|alignCenter|data-filename=&quot;kubernetes-클라우드-조정(19).png&quot; data-origin-width=&quot;480&quot; data-origin-height=&quot;129&quot;|||_##]</p> <p>서비스 노출 시에는 pod가 사용됩니다. 즉, 다른 앱이 서버 중 하나의 포트 31000과 연결을 시도하면 포트 충돌이 발생할 수 있습니다.</p> <p> </p> <p>일반적으로 포트 할당은 Kubernetes가 처리합니다. 이 실습에서는 포트를 선택했기 때문에 추후 더 쉽게 상태 확인을 설정할 수 있습니다.</p> <p> </p> <p><span style="background-color:#dddddd;">gcloud compute firewall-rules</span><span> </span>명령어를 사용하여 트래픽을 노출된 NodePort의 모놀리식 서비스로 보냅니다.</p> <pre id="code_1587056280384" data-ke-language="go" data-ke-type="codeblock" class="go"><code>gcloud compute firewall-rules create allow-monolith-nodeport \ --allow=tcp:31000</code></pre> <p>[##_Image|kage@rSFRz/btqDvykZZSR/t8FJixNyDlbgG19b9RjtQK/img.png|alignCenter|data-origin-width=&quot;1046&quot; data-origin-height=&quot;197&quot;|firewall rules를 추가했다.||_##]</p> <h3>완료된 작업 테스트하기</h3> <p>아래의<span> </span><b>내 진행 상황 확인하기</b>를 클릭하여 실습 진행 상황을 확인합니다. 31000 포트에서 TCP 트래픽을 허용하는 방화벽 규칙을 완성하면 평가 점수가 표시됩니다.</p> <p>[##_Image|kage@bYuQtk/btqDsO99Y0i/OpjX1YfmWqoUnkHp5Wa1X0/img.png|alignCenter|data-filename=&quot;kubernetes-클라우드-조정(21).png&quot; data-origin-width=&quot;481&quot; data-origin-height=&quot;128&quot;|||_##]</p> <p> </p> <p>이제 설정이 완료되었으니 포트 전달 없이 클러스터 밖에서 안전한 모놀리식 서비스를 조회할 수 있습니다.</p> <p> </p> <p>먼저 노드 1개의 외부 IP 주소를 가져옵니다.</p> <pre id="code_1587056373128" data-ke-language="go" data-ke-type="codeblock" class="go"><code>gcloud compute instances list</code></pre> <p>이제<span> </span><span style="background-color:#dddddd;">curl</span>을 사용하여 보안이 설정된 모놀리식 서비스를 조회해 봅니다.</p> <p> </p> <pre id="code_1587056391584" data-ke-language="html" data-ke-type="codeblock" class="html xml"><code>curl -k https://&lt;EXTERNAL_IP&gt;:31000</code></pre> <p>이런! 시간이 초과되었습니다. 왜 그럴까요?</p> <p>[##_Image|kage@beVmkQ/btqDsaFJ5FP/KVlxcRiuabTG7K45dA3421/img.png|alignCenter|data-filename=&quot;kubernetes-클라우드-조정(22).png&quot; data-origin-width=&quot;1046&quot; data-origin-height=&quot;286&quot;|연결 오류가 발생한다.||_##]</p> <blockquote data-ke-style="style3">이제 배운 내용을 간단하게 확인해 보겠습니다.다음 명령어를 사용하여 아래 질문에 답하세요.<br><span style="background-color:#dddddd;">kubectl get services monolith<br></span><span style="background-color:#dddddd;">kubectl describe services monolith<br></span><b>질문:<br></b><span style="color:#333333;letter-spacing:0px;">(1) 모놀리식 서비스가 응답하지 않은 이유는 무엇인가요?<br></span><span style="color:#333333;letter-spacing:0px;">(2) 모놀리식 서비스는 몇 개의 엔드포인트를 가지고 있나요?<br></span><span style="color:#333333;letter-spacing:0px;">(3) 모놀리식 서비스가 포드를 감지하게 하려면 포드에 어떤 라벨이 지정되어 있어야 하나요?</span></blockquote> <p>힌트: 라벨에 관한 질문입니다. 다음 섹션에서 이 문제를 해결하겠습니다.</p> <p>[##_Image|kage@bQA8qj/btqDvzdasPV/hO4VrEMkxDNh77V7beVZCk/img.png|alignCenter|data-origin-width=&quot;0&quot; data-origin-height=&quot;0&quot;|질문에 답하기 위해 명령어를 실행시켜 보았다!||_##]</p> <blockquote data-ke-style="style3"><b>내 생각에는 이렇다.</b><br>(1) 모놀리식 서비스가 응답하지 않은 이유는 무엇인가요?<br><b><span style="color:#006dd7;">- 모놀리식 서비스의 External IP가 &lt;none&gt;이기 때문이다.</span></b><br>(2) 모놀리식 서비스는 몇 개의 엔드포인트를 가지고 있나요?<br><b><span style="color:#006dd7;">- 한 개도 가지고 있지 않다.</span></b><br>(3) 모놀리식 서비스가 포드를 감지하게 하려면 포드에 어떤 라벨이 지정되어 있어야 하나요?<br><b><span style="color:#006dd7;">- Name 인 monolith 인 것 같다.</span></b></blockquote> <h2 id="step11"><span style="background-color:#99cefa;">포드에 라벨 추가하기</span></h2> <p>현재 모놀리식 서비스에는 엔드포인트가 없습니다. 이와 같은 문제를 해결하는 방법 중 하나는 라벨 쿼리와 함께<span> </span><span style="background-color:#dddddd;">kubectl get pods</span><span> </span>명령어를 사용하는 것입니다</p> <p> </p> <p>모놀리식 라벨이 지정되어 실행되는 포드 몇 개가 있다는 사실을 확인할 수 있습니다.</p> <pre id="code_1587056501577" data-ke-language="go" data-ke-type="codeblock" class="go"><code>kubectl get pods -l &quot;app=monolith&quot;</code></pre> <p>그런데 'app=monolith'와 'secure=enabled'는 어떤가요?</p> <pre id="code_1587056510159" data-ke-language="go" data-ke-type="codeblock" class="go"><code>kubectl get pods -l &quot;app=monolith,secure=enabled&quot;</code></pre> <p>이 라벨 쿼리로는 결과가 출력되지 않습니다. 'secure=enabled' 라벨을 추가해야 할 것 같습니다.</p> <p> </p> <p><span style="background-color:#dddddd;">kubectl label </span>명령어를 사용하여 보안이 설정된 모놀리식 포드에 누락된<span> </span>secure=enabled<span> </span>라벨을 추가합니다. 그런 다음 라벨이 업데이트되었는지 확인합니다.</p> <pre id="code_1587056530488" data-ke-language="go" data-ke-type="codeblock" class="go"><code>kubectl label pods secure-monolith 'secure=enabled' 
kubectl get pods secure-monolith --show-labels</code></pre> <p>[##_Image|kage@zjnQ5/btqDvXSqVuf/8xTL7vAjeBx4VMEu01DvnK/img.png|alignCenter|data-origin-width=&quot;0&quot; data-origin-height=&quot;0&quot;|라벨을 추가하였고 정상적으로 업데이트 되었다!||_##]</p> <p> </p> <p>이제 포드에 정확한 라벨을 지정했으니 모놀리식 서비스의 엔드포인트 목록을 확인합니다.</p> <pre id="code_1587056541273" data-ke-language="go" data-ke-type="codeblock" class="go"><code>kubectl describe services monolith | grep Endpoints</code></pre> <p>[##_Image|kage@ctb0Y7/btqDsbq5JeG/L3ngvV20RVPMAEdVEK6kz1/img.png|alignCenter|data-origin-width=&quot;0&quot; data-origin-height=&quot;0&quot;|Endpoints가 생겼다!||_##]</p> <p>엔드포인트가 하나 있습니다.</p> <p> </p> <p>노드 중 하나를 조회하여 이 엔드포인트를 테스트해 보겠습니다.</p> <pre id="code_1587056558290" data-ke-language="html" data-ke-type="codeblock" class="html xml"><code>gcloud compute instances list 
curl -k https://&lt;EXTERNAL_IP&gt;:31000</code></pre> <p>[##_Image|kage@AskgT/btqDupPLjTh/AElVva5PsrCaGykjJvP0Kk/img.png|alignCenter|data-filename=&quot;kubernetes-클라우드-조정(26).png&quot; data-origin-width=&quot;1044&quot; data-origin-height=&quot;329&quot;|노드 중 하나를 조회하였다! 성공적으로 출력된다.||_##]</p> <p>좋습니다. 성공입니다.</p> <h3>완료된 작업 테스트하기</h3> <p>아래의<span> </span><b>내 진행 상황 확인하기</b>를 클릭하여 실습 진행 상황을 확인합니다. 모놀리식 pod에 라벨을 추가하면 평가 점수가 표시됩니다.</p> <p>[##_Image|kage@ptObh/btqDwd8xzju/kjl47CFARj7PeAiCzXMtLK/img.png|alignCenter|data-filename=&quot;kubernetes-클라우드-조정(27).png&quot; data-origin-width=&quot;484&quot; data-origin-height=&quot;121&quot;|||_##]</p> <p> </p> <p> </p> <h2 id="step12"><span style="background-color:#99cefa;">Kubernetes로 애플리케이션 배포하기</span></h2> <p>이 실습의 목표는 <span style="background-color:#f6e199;">프로덕션의 컨테이너를 확장하고 관리하는 것</span>입니다. 이와 같은 상황에서<span> </span><a href="http://kubernetes.io/docs/user-guide/deployments/#what-is-a-deployment">디플로이먼트</a>가 유용합니다. 디플로이먼트는 <b>실행 중인 포드의 개수가 사용자가 명시한 포드 개수와 동일하게 만드는 선언적 방식</b>입니다.</p> <p>[##_Image|kage@6wd5X/btqDsaeBGTX/42D28BtKWJazP6yxl3Mi3K/img.jpg|alignCenter|data-origin-width=&quot;0&quot; data-origin-height=&quot;0&quot; width=&quot;614&quot; height=&quot;345&quot;|||_##]</p> <p><span style="color:#333333;">디플로이먼트</span>의 주요 이점은 pod 관리에서 낮은 수준의 세부정보를 추상화하는 데 있습니다. <span style="color:#333333;">디플로이먼트</span>는 백그라운드에서<span> </span><a href="http://kubernetes.io/docs/user-guide/replicasets/">복제본 집합</a>을 사용하여 pod의 시작 및 중지를 관리합니다. Pod를 업데이트하거나 확장해야 하는 경우 <span style="color:#333333;">디플로이먼트</span>가 이를 처리합니다. 또한 디플로이먼트는 어떤 이유로든 포드가 중지되면 재시작을 담당하여 처리합니다.</p> <p> </p> <p>간단한 예를 살펴보겠습니다.</p> <p>[##_Image|kage@d0nYV6/btqDwdU0wCx/ywCKrhgL7UNdTbMKCFtKEK/img.jpg|alignCenter|data-origin-width=&quot;0&quot; data-origin-height=&quot;0&quot; width=&quot;589&quot; height=&quot;332&quot;|||_##]</p> <p>포드는 생성 기반 노드의 전체 기간과 연결되어 있습니다. 위 예시에서 Node3이 중단되면서 포드도 중단되었습니다. 직접 새로운 포드를 만들고 이를 위한 노드를 찾는 대신, 디플로이먼트가 새로운 포드를 만들고 Node2에서 실행했습니다.</p> <p> </p> <p>아주 편리한 방식입니다.</p> <p> </p> <p>포드와 서비스에 관해 배운 모든 지식을 바탕으로, 이제 디플로이먼트를 사용하여 모놀리식 <b>애플리케이션을 작은 서비스로 분할해 보겠습니다.</b></p> <h2 id="step13"><span style="background-color:#99cefa;">디플로이먼트 만들기</span></h2> <p>모놀리식 앱을 다음의 3가지 부분으로 나눕니다.</p> <ul><li><b>auth</b><span> </span>- 인증된 사용자를 위한 JWT 토큰을 생성합니다.</li> <li><b>hello</b><span> </span>- 인증된 사용자를 안내합니다.</li> <li><b>frontend</b><span> </span>- 트래픽을 auth 및 hello 서비스로 전달합니다.</li></ul> <p>각 서비스용 디플로이먼트를 만들 준비가 됐습니다. 그런 다음 auth 및 hello 디플로이먼트용 내부 서비스와 frontend 디플로이먼트용 외부 서비스를 정의하겠습니다. 이렇게 하면 모놀리식과 같은 방식으로 마이크로서비스와 상호작용할 수 있으며, 각 서비스를 독립적으로 확장하고 배포할 수 있습니다.</p> <p> </p> <p>auth 디플로이먼트 구성 파일을 검토하는 것으로 시작하겠습니다.</p> <pre id="code_1587056730930" data-ke-language="go" data-ke-type="codeblock" class="go"><code>cat deployments/auth.yaml</code></pre> <p> </p> <p>(출력)</p> <pre id="code_1587056746664" data-ke-language="go" data-ke-type="codeblock" class="go"><code>apiVersion: extensions/v1beta1
kind: Deployment
metadata:
  name: auth
spec:
  replicas: 1
  template:
    metadata:
      labels:
        app: auth
        track: stable
    spec:
      containers:
        - name: auth
          image: &quot;kelseyhightower/auth:2.0.0&quot;
          ports:
            - name: http
              containerPort: 80
            - name: health
              containerPort: 81
...</code></pre> <p>디플로이먼트가 복제본 1개를 만들며, 여기서는 auth 컨테이너 2.0.0 버전을 사용합니다.</p> <p> </p> <p><span style="background-color:#dddddd;">kubectl create</span><span> </span>명령어를 실행하여 auth 디플로이먼트를 만들면 디플로이먼트 매니페스트 데이터를 준수하는 포드가 만들어집니다. 즉, 복제본 필드에 <b>명시된 숫자를 변경하여 포드 숫자를 조정</b>할 수 있습니다.</p> <p> </p> <p>이제 디플로이먼트 개체를 만듭니다.</p> <pre id="code_1587056777913" data-ke-language="go" data-ke-type="codeblock" class="go"><code>kubectl create -f deployments/auth.yaml</code></pre> <p>또한 auth 디플로이먼트용 서비스를 만듭니다.<span> </span><span style="background-color:#dddddd;">kubectl create</span><span> </span>명령어를 사용하여 auth 서비스를 만듭니다.</p> <pre id="code_1587056789880" data-ke-language="go" data-ke-type="codeblock" class="go"><code>kubectl create -f services/auth.yaml</code></pre> <p>hello 디플로이먼트 만들기와 노출도 위와 동일하게 진행합니다.</p> <pre id="code_1587056801224" data-ke-language="go" data-ke-type="codeblock" class="go"><code>kubectl create -f deployments/hello.yaml
kubectl create -f services/hello.yaml</code></pre> <p>frontend 디플로이먼트 만들기와 노출 또한 위와 동일하게 진행합니다.</p> <pre id="code_1587056823785" data-ke-language="go" data-ke-type="codeblock" class="go"><code>kubectl create configmap nginx-frontend-conf --from-file=nginx/frontend.conf 
kubectl create -f deployments/frontend.yaml 
kubectl create -f services/frontend.yaml</code></pre> <blockquote data-ke-style="style3">frontend를 만들기 위해 컨테이너에 구성 데이터를 보관해야 하기 때문에 추가 단계를 진행합니다.</blockquote> <p>[##_Image|kage@yCv5q/btqDtAKBYC8/cGX7BQRJlavAmxkSHpCbP0/img.png|alignCenter|data-filename=&quot;kubernetes-클라우드-조정(28).png&quot; data-origin-width=&quot;1041&quot; data-origin-height=&quot;401&quot;|디폴로이먼트 개체를만들고 auth 및 hello, frontend 디폴로이먼트를 동일하게 진행한다.||_##]</p> <p><span><span style="color:#666666;">외부 IP 주소를 확보하고 curl 명령어를 사용하여 frontend와 상호작용합니다.</span><span style="overflow:hidden;line-height:0px;"></span></span></p> <pre id="code_1587056852961" data-ke-language="go" data-ke-type="codeblock" class="go"><code>kubectl get services frontend 
curl -k https://&lt;EXTERNAL-IP&gt;</code></pre> <p>그러면 hello 응답을 받게 됩니다.</p> <p>[##_Image|kage@eLS436/btqDweTUGLy/nCmQzqGgHDiOezWNYLMHk0/img.png|alignCenter|data-origin-width=&quot;0&quot; data-origin-height=&quot;0&quot;|정상적으로 hello 응답을 받았다!||_##]</p> <h3>완료된 작업 테스트하기</h3> <p>아래의<span> </span><b>내 진행 상황 확인하기</b>를 클릭하여 실습 진행 상황을 확인합니다. Auth, Hello 및 Frontend 배포를 완성하면 평가 점수가 표시됩니다.</p> <p>[##_Image|kage@Fnqad/btqDvYX4x1x/l1wRewHg4hUl7HQKWDqq30/img.png|alignCenter|data-filename=&quot;kubernetes-클라우드-조정(30).png&quot; data-origin-width=&quot;494&quot; data-origin-height=&quot;124&quot;|||_##]</p> <p> </p> <h2 id="step14"><span style="background-color:#99cefa;">끝났다!</span></h2> <p>축하합니다. Kubernetes를 사용하여 다중 서비스 애플리케이션을 개발했습니다. 이 실습에서 배운 기술은 Kubernetes에서 디플로이먼트 및 서비스 컬렉션을 사용하여 복잡한 애플리케이션을 배포하는 데 사용됩니다.</p> <p>[##_Image|kage@dlZiHs/btqDsO999dk/6tm7eNgOMoKIkRqFcWQtE0/img.png|alignCenter|data-filename=&quot;kubernetes-클라우드-조정(31).png&quot; data-origin-width=&quot;343&quot; data-origin-height=&quot;106&quot;|첫 번째 Quest를 완료하면 1달 무료 구독이다!||_##]</p> <p> </p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">2/7/2021, 5:47:34 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/til/GCP/06.Cloud-Architecture.html" class="prev">
        Qwiklabs - Cloud Architecture
      </a></span> <span class="next"><a href="/til/machine-learning/01.컴퓨터는-데이터에서-배운다.html">
        1장 컴퓨터는 데이터에서 배운다
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/til/assets/js/app.bfbfa927.js" defer></script><script src="/til/assets/js/2.f827bc55.js" defer></script><script src="/til/assets/js/37.d923853e.js" defer></script><script src="/til/assets/js/46.01e6df54.js" defer></script>
  </body>
</html>
