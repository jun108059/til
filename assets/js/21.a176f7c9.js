(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{402:function(s,t,a){"use strict";a.r(t);var n=a(27),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"error-handling-note"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#error-handling-note"}},[s._v("#")]),s._v(" Error Handling Note")]),s._v(" "),a("p",[s._v("Elasticsearch 7.9 버전을 사용하면서 발생한 Error를 정리하였다.")]),s._v(" "),a("hr"),s._v(" "),a("h3",{attrs:{id:"실습-환경"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#실습-환경"}},[s._v("#")]),s._v(" 실습 환경")]),s._v(" "),a("h3",{attrs:{id:"💡-elasticsearch-7-9-0"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#💡-elasticsearch-7-9-0"}},[s._v("#")]),s._v(" 💡 Elasticsearch 7.9.0")]),s._v(" "),a("h3",{attrs:{id:"💡-windows-10"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#💡-windows-10"}},[s._v("#")]),s._v(" 💡 Windows 10")]),s._v(" "),a("h3",{attrs:{id:"💡-git-bash"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#💡-git-bash"}},[s._v("#")]),s._v(" 💡 Git Bash")]),s._v(" "),a("hr"),s._v(" "),a("h2",{attrs:{id:"header-not-supported-error"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#header-not-supported-error"}},[s._v("#")]),s._v(" header not supported Error")]),s._v(" "),a("h3",{attrs:{id:"문제점"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#문제점"}},[s._v("#")]),s._v(" 문제점")]),s._v(" "),a("p",[a("strong",[s._v("2020.08.21")]),a("br"),s._v(" "),a("code",[s._v("ES")]),s._v("에서 "),a("code",[s._v("index")]),s._v("를 생성하고 확인하고 삭제할 때는 아무 Error가 나지 않았는데")]),s._v(" "),a("p",[a("code",[s._v("Document")]),s._v("를 만들 때 다음과 같은 Error가 발생한다.")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"error"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Content-Type header [application/x-www-form-urlencoded] is not supported"')]),s._v(",\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"status"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("406")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("h3",{attrs:{id:"원인"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#원인"}},[s._v("#")]),s._v(" 원인")]),s._v(" "),a("p",[a("code",[s._v("Elasticsearch")]),s._v(" 6.0 이후 버전에 도입된 "),a("a",{attrs:{href:"https://www.elastic.co/kr/blog/strict-content-type-checking-for-elasticsearch-rest-requests",target:"_blank",rel:"noopener noreferrer"}},[s._v("업격한 content-type 확인"),a("OutboundLink")],1),s._v("으로 인해 발생하는 Error이다.")]),s._v(" "),a("h3",{attrs:{id:"해결방법"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#해결방법"}},[s._v("#")]),s._v(" 해결방법")]),s._v(" "),a("p",[a("code",[s._v("curl")]),s._v(" 명령어에 옵션을 다음과 같이 추가해서 실행해야 한다.")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("-H "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Content-Type: application/json'")]),s._v("\n")])])]),a("h3",{attrs:{id:"example"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#example"}},[s._v("#")]),s._v(" Example")]),s._v(" "),a("p",[a("strong",[s._v("Error 상황")])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" -XPOST http://localhost:9200/classes/class/1/?pretty -d @oneclass.json\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"error"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Content-Type header [application/x-www-form-urlencoded] is not supported"')]),s._v(",\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"status"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("406")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("p",[a("strong",[s._v("해결")])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" -XPOST http://localhost:9200/classes/class/1/?pretty -H "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Content-Type: application/json'")]),s._v(" -d @oneclass.json\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("394")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("222")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("172")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1734")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1343")]),s._v(" --:--:-- --:--:-- --:--:--  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3078")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"_index"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"classes"')]),s._v(",\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"_type"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"class"')]),s._v(",\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"_id"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1"')]),s._v(",\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"_version"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(",\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"result"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"created"')]),s._v(",\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"_shards"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"total"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"successful"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"failed"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"_seq_no"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(",\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"_primary_term"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n")])])]),a("hr"),s._v(" "),a("h2",{attrs:{id:"could-not-resolve-host-application"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#could-not-resolve-host-application"}},[s._v("#")]),s._v(" Could not resolve host: application")]),s._v(" "),a("h3",{attrs:{id:"문제점-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#문제점-2"}},[s._v("#")]),s._v(" 문제점")]),s._v(" "),a("p",[a("strong",[s._v("2020.08.21")]),a("br"),s._v("\nWindows10 개발 환경에서 Elasticsearch를 테스트 중에 위 "),a("code",[s._v("header")]),s._v(" 문제를 해결한 듯 하였는데 아래에 이런 "),a("code",[s._v("Error")]),s._v("가 더 있었다.")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("curl: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" Could not resolve host: application\n")])])]),a("h3",{attrs:{id:"원인-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#원인-2"}},[s._v("#")]),s._v(" 원인")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://cmder.net/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Cmder"),a("OutboundLink")],1),s._v("이라는 Windows 콘솔 에뮬레이터를 사용하면 "),a("code",[s._v("ls")]),s._v("와 같은 명령어를 사용할 수 있기 때문에 괜찮을 줄 알았지만 Unix 명령어를 오류없이 사용하는 것은 아직 안되는 것 같다.")]),s._v(" "),a("h3",{attrs:{id:"해결방법-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#해결방법-2"}},[s._v("#")]),s._v(" 해결방법")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://gitforwindows.org/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Git Bash"),a("OutboundLink")],1),s._v("를 사용해 똑같은 명령어를 작성했는데 잘 된다.")]),s._v(" "),a("p",[a("s",[s._v("Cmder을 삭제해야겠다.")])]),s._v(" "),a("hr"),s._v(" "),a("h2",{attrs:{id:"the-bulk-request-must-be-terminated-by-a-newline-n"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#the-bulk-request-must-be-terminated-by-a-newline-n"}},[s._v("#")]),s._v(" The Bulk request must be terminated by a newline [\\n]")]),s._v(" "),a("h3",{attrs:{id:"문제점-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#문제점-3"}},[s._v("#")]),s._v(" 문제점")]),s._v(" "),a("p",[a("code",[s._v("JSON file")]),s._v("을 Bulk 하는 과정에서 Error 가 발생했다."),a("br"),s._v(" "),a("strong",[s._v("2020.08.21")])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"error"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"root_cause"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"type"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"illegal_argument_exception"')]),s._v(",\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"reason"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"The bulk request must be terminated by a newline ['),a("span",{pre:!0,attrs:{class:"token entity",title:"\\\\"}},[s._v("\\\\")]),s._v('n]"')]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"type"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"illegal_argument_exception"')]),s._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"reason"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"The bulk request must be terminated by a newline ['),a("span",{pre:!0,attrs:{class:"token entity",title:"\\\\"}},[s._v("\\\\")]),s._v('n]"')]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"status"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("400")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("h3",{attrs:{id:"원인-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#원인-3"}},[s._v("#")]),s._v(" 원인")]),s._v(" "),a("p",[s._v("Error 설명대로 "),a("code",[s._v("New Line")]),s._v("으로 끝나야되는데 "),a("code",[s._v("New Line")]),s._v("이 없어서 그런 것 같다.")]),s._v(" "),a("h3",{attrs:{id:"해결방법-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#해결방법-3"}},[s._v("#")]),s._v(" 해결방법")]),s._v(" "),a("p",[s._v("JSON file에 엔터를 두 번 쳤다.")]),s._v(" "),a("p",[a("s",[s._v("이렇게 단순한 Error는 적지도 말아야겠다. Error 잡는 시간보다 정리하는게 더 오래걸렸음")])]),s._v(" "),a("hr"),s._v(" "),a("h2",{attrs:{id:"mapping-설정에서-문제점-elasticsearch-7-x-버전"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mapping-설정에서-문제점-elasticsearch-7-x-버전"}},[s._v("#")]),s._v(" Mapping 설정에서 문제점(Elasticsearch 7.x 버전)")]),s._v(" "),a("p",[a("strong",[s._v("2020.08.24")])]),s._v(" "),a("h3",{attrs:{id:"✔-문제점"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#✔-문제점"}},[s._v("#")]),s._v(" ✔ 문제점")]),s._v(" "),a("p",[s._v("Elasticsearch 7.x 버전에서 "),a("code",[s._v("Mapping")]),s._v("을 생성하는 실습 도중 에러가 발생했다.")]),s._v(" "),a("p",[s._v("에러문구는 다음과 같다.")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"error"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"root_cause"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"type"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"illegal_argument_exception"')]),s._v(",\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"reason"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Types cannot be provided in put mapping requests, unless the include_type_name parameter is set to true."')]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"type"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"illegal_argument_exception"')]),s._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"reason"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Types cannot be provided in put mapping requests, unless the include_type_name parameter is set to true."')]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"status"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("400")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("hr"),s._v(" "),a("h3",{attrs:{id:"원인-4"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#원인-4"}},[s._v("#")]),s._v(" 원인")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("Elasticsearch 7.x")]),s._v(" 버전부터는 "),a("code",[s._v("curl")]),s._v(" 리퀘스트에서 헤더를 명확히 설정해주어야 한다.")]),s._v(" "),a("li",[a("code",[s._v("mapping")]),s._v("을 생성할 때에는 "),a("code",[s._v("include_type_name")]),s._v("을 "),a("code",[s._v("true")]),s._v("로 설정해주어야 한다.")])]),s._v(" "),a("hr"),s._v(" "),a("h3",{attrs:{id:"해결방법-4"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#해결방법-4"}},[s._v("#")]),s._v(" 해결방법")]),s._v(" "),a("h4",{attrs:{id:"_1️⃣-mapping을-생성할-때-아래와-같이-content-type-추가"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1️⃣-mapping을-생성할-때-아래와-같이-content-type-추가"}},[s._v("#")]),s._v(" 1️⃣ "),a("code",[s._v("mapping")]),s._v("을 생성할 때 아래와 같이 Content-Type 추가")]),s._v(" "),a("p",[a("code",[s._v("-H 'Content-Type: application/json'")])]),s._v(" "),a("p",[s._v("전체 커멘드 라인")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" -XPUT http://localhost:9200/classes/class/_mapping -d @classesRating_mapping.json -H "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Content-Type: application/json'")]),s._v("\n")])])]),a("p",[s._v("다른 에러 발생")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"error"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"root_cause"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"type"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"illegal_argument_exception"')]),s._v(",\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"reason"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Types cannot be provided in put mapping requests, unless the include_type_name parameter is set to true."')]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"type"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"illegal_argument_exception"')]),s._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"reason"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Types cannot be provided in put mapping requests, unless the include_type_name parameter is set to true."')]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"status"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("400")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("p",[s._v("이 에러에 대해 "),a("a",{attrs:{href:"https://www.elastic.co/kr/blog/moving-from-types-to-typeless-apis-in-elasticsearch-7-0",target:"_blank",rel:"noopener noreferrer"}},[s._v("Elasticsearch 공식 문서"),a("OutboundLink")],1),s._v("를 찾아보면 7.0 버전 부터는 무형식 API를 도입함에 따라")]),s._v(" "),a("p",[a("strong",[s._v("include_type_name=true를 인덱스 생성, 템플릿, 매핑 API로 전달")]),s._v(" 하라는 내용이 있다.")]),s._v(" "),a("p",[s._v("추가해보았다.")]),s._v(" "),a("h4",{attrs:{id:"_2️⃣-include-type-name-true-추가"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2️⃣-include-type-name-true-추가"}},[s._v("#")]),s._v(" 2️⃣ "),a("code",[s._v("include_type_name=true")]),s._v(" 추가")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" -XPUT "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'http://localhost:9200/classes/class/_mapping?include_type_name=true&pretty'")]),s._v(" -d @classesRating_mapping.json -H "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Content-Type: application/json'")]),s._v("\n")])])]),a("p",[s._v("또 다른 에러가 발생했다.")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"error"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"root_cause"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"type"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mapper_parsing_exception"')]),s._v(",\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"reason"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"No handler for type [string] declared on field [professor]"')]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"type"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mapper_parsing_exception"')]),s._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"reason"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"No handler for type [string] declared on field [professor]"')]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"status"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("400")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n")])])]),a("p",[s._v("이 원인을 "),a("a",{attrs:{href:"https://stackoverflow.com/questions/47452770/no-handler-for-type-string-declared-on-field-name",target:"_blank",rel:"noopener noreferrer"}},[s._v("stackoverflow"),a("OutboundLink")],1),s._v("에서 찾을 수 있는데 6.0 버전 이상부터 Mapping Type 중 "),a("code",[s._v("String")]),s._v("을 삭제하고 "),a("code",[s._v("text")]),s._v("로 변경하여 사용한다고 한다.")]),s._v(" "),a("p",[s._v("따라서 기존의 mapping 타입 중 string을 삭제하면 해결된다.")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://www.inflearn.com/questions/12385",target:"_blank",rel:"noopener noreferrer"}},[s._v("참고한 글"),a("OutboundLink")],1)]),s._v(" "),a("hr")])}),[],!1,null,null,null);t.default=e.exports}}]);