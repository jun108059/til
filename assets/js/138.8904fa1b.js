(window.webpackJsonp=window.webpackJsonp||[]).push([[138],{797:function(e,a,t){"use strict";t.r(a);var s=t(12),_=Object(s.a)({},(function(){var e=this,a=e._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"_11-기본-object-namespace-resourcequota-limitrange-란"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_11-기본-object-namespace-resourcequota-limitrange-란"}},[e._v("#")]),e._v(" 11.기본 Object - Namespace, ResourceQuota, LimitRange 란?")]),e._v(" "),a("p",[a("code",[e._v("기능 설명에 앞서 이 Object들을 왜 써야 하는지 알아보자.")])]),e._v(" "),a("p",[e._v("Kubernetes Cluster에 전체 사용할 수 있는 자원이 있다고 해보자.")]),e._v(" "),a("p",[e._v("일반적으로 Memory나 CPU가 있을 것이다.")]),e._v(" "),a("p",[e._v("Cluster안에는 여러 Namespace를 만들 수 있고, Namespace안에는 여러 Pod를 만들 수 있다.")]),e._v(" "),a("p",[e._v("Namespace안에 여러 Pod가 생성 됨")]),e._v(" "),a("p",[e._v("각 Pod는 필요한 자원을 Cluster 자원에서 공유해서 사용한다.")]),e._v(" "),a("p",[e._v("여기서 하나의 Namespace안에 있는 Pod가 Cluster에 남은 자원을 모두 사용해버리면")]),e._v(" "),a("p",[e._v("다른 Pod는 더이상 쓸 자원이 없어 문제가 발생하게 된다.")]),e._v(" "),a("p",[e._v("자원이 부족하다!\n이런 상황을 방지하기 위해 Resource Quota가 필요하다!")]),e._v(" "),a("p",[e._v("Resource Quota는 Namespace에 최대 한계를 설정할 수 있다.")]),e._v(" "),a("p",[e._v("Pod 입장에서 자원이 부족해 문제가 발생할 수 있지만")]),e._v(" "),a("p",[e._v("다른 Namesapce에 있는 Pod에는 영향을 끼치지 않게된다.")]),e._v(" "),a("p",[e._v("Resource Quota 적용한 모습\n세번째 그림과 같이 하나의 Pod의 자원 사용량이 너무 크면 다른 Pod가 Namespace에 들어오지 못한다.")]),e._v(" "),a("p",[e._v("이런 상황을 방지하기 위해 LimitRange를 둬서 Namespace에 들어오는 Pod 크기를 제한할 수 있다!")]),e._v(" "),a("p",[e._v("Limit Range로 Pod의 크기를 제한\n참고로 Limit Range, Resource Quota는 Namespace뿐만아니라 Kubernetes Cluster에도 적용할 수 있다.")]),e._v(" "),a("p",[e._v("Cluster에도 Limit Range와 Resource Quota를 설정할 수 있다!\n이제 각 Object의 기능을 살펴보자!")]),e._v(" "),a("h2",{attrs:{id:"_1-namespace"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-namespace"}},[e._v("#")]),e._v(" 1. Namespace")]),e._v(" "),a("h3",{attrs:{id:"특징-1-1-하나의-namespace안에는-같은-type의-object들은-이름이-중복될-수-없다"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#특징-1-1-하나의-namespace안에는-같은-type의-object들은-이름이-중복될-수-없다"}},[e._v("#")]),e._v(" 특징 1-1) 하나의 Namespace안에는 같은 Type의 Object들은 이름이 중복될 수 없다.")]),e._v(" "),a("p",[e._v("ex) 같은 이름의 Pod를 생성할 수 없다!")]),e._v(" "),a("p",[e._v("중복된 이름의 Pod 생성 불가능!\nObject들 마다 별도의 유효ID가 존재하지만 한 Namespace안에서는 같은 종류의 Object라면")]),e._v(" "),a("p",[e._v("이름 또한 유효ID 같이 유일한 Key 역할을 한다는 의미이다.")]),e._v(" "),a("h3",{attrs:{id:"특징-1-2-다른-namespace의-자원과-분리가-되어-관리된다"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#특징-1-2-다른-namespace의-자원과-분리가-되어-관리된다"}},[e._v("#")]),e._v(" 특징 1-2) 다른 Namespace의 자원과 분리가 되어 관리된다.")]),e._v(" "),a("p",[e._v("Namespace2에 Service1이 존재할 때,")]),e._v(" "),a("p",[e._v("Pod1의 Label과 Service1의 selector를 연결할 수 없다는 의미이다.")]),e._v(" "),a("p",[e._v("Namespace는 각각 분리되어 관리\n지금까지 배웠던 대부분의 자원들은 그 자원안에서 만든 Namespace안에서만 사용 가능\n하지만 Node나 PV처럼 모든 Namespace에서 공용으로 사용되는 Object도 있다.")]),e._v(" "),a("h3",{attrs:{id:"특징-1-3-namespace를-지우게-되면-그-안에-있는-자원-pod-service-등-도-다-지워진다"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#특징-1-3-namespace를-지우게-되면-그-안에-있는-자원-pod-service-등-도-다-지워진다"}},[e._v("#")]),e._v(" 특징 1-3) Namespace를 지우게 되면 그 안에 있는 자원(Pod, Service 등)도 다 지워진다.")]),e._v(" "),a("p",[e._v("지울 때 신중하게 지워야한다.")]),e._v(" "),a("p",[e._v("Pod 마다 IP를 가지고 있는데 접근 요청을 하면 어떻게 될까?")]),e._v(" "),a("p",[e._v("다른 Namespace에서 Pod IP 접근\n앞 게시글에서 연결을 허용해주지 않는다고 설명했는데")]),e._v(" "),a("p",[e._v("기본적으로는 연결이 되고 나중에 배울 Network Policy라는 Object에서 제한할 수 있다.")]),e._v(" "),a("p",[e._v("yaml 파일 내용을 확인해보자.")]),e._v(" "),a("p",[e._v("Namespace의 yaml 파일\nNamespace를 만들 때는 이름 외에는 특별히 들어가는 값이 없다.")]),e._v(" "),a("p",[e._v("Pod나 Service를 만들 때 속하게 될 namespace를 지정할 수 있다.")]),e._v(" "),a("p",[e._v("두 Object는 namespace이름이 다르기 때문에(nm-1, nm-2) labels와 selector의 값이 같아도 연결되지 않는다!")]),e._v(" "),a("h2",{attrs:{id:"_2-resourcequota"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-resourcequota"}},[e._v("#")]),e._v(" 2.ResourceQuota")]),e._v(" "),a("h3",{attrs:{id:"resourceqouta란"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#resourceqouta란"}},[e._v("#")]),e._v(" ResourceQouta란?")]),e._v(" "),a("ul",[a("li",[e._v("Namespace의 자원 한계를 설정하는 Object")])]),e._v(" "),a("p",[e._v("ResourceQuota 설정\n위와 같이 Namespace에 제한하고 싶은 자원을 명시한다.")]),e._v(" "),a("blockquote",[a("p",[e._v("Namespace에 들어갈 Pod들의 request 자원을 3G로 설정"),a("br"),e._v("\nMemory limit를 6G로 설정")])]),e._v(" "),a("h4",{attrs:{id:"resource-quota를-지정한-경우"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#resource-quota를-지정한-경우"}},[e._v("#")]),e._v(" Resource Quota를 지정한 경우")]),e._v(" "),a("h3",{attrs:{id:"특징-2-1-같은-namespace에-pod를-생성할-때-꼭-스펙을-명시해야함"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#특징-2-1-같은-namespace에-pod를-생성할-때-꼭-스펙을-명시해야함"}},[e._v("#")]),e._v(" 특징 2-1) 같은 Namespace에 Pod를 생성할 때 꼭 스펙을 명시해야함!")]),e._v(" "),a("p",[e._v("Pod 생성 시 스펙을 명시해야함\nPod2 처럼 스펙이 없는 경우 Namespace에 생성되지 않음")]),e._v(" "),a("h3",{attrs:{id:"특징-2-2-생성할-pod의-용량이-초과되면-생성-안됨"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#특징-2-2-생성할-pod의-용량이-초과되면-생성-안됨"}},[e._v("#")]),e._v(" 특징 2-2) 생성할 Pod의 용량이 초과되면 생성 안됨!")]),e._v(" "),a("p",[e._v("당연한 얘기지만 여러 Pod의 합산 memory가 request를 넘어도 생성이 안됨.")]),e._v(" "),a("p",[e._v("yaml 파일을 살펴보자.")]),e._v(" "),a("p",[e._v("ResourceQuota를 만들 때 할당할 namespace를 설정한 후,")]),e._v(" "),a("p",[e._v("hard라는 속성에 자원(requests)과 한계(limits)가 들어간다.")]),e._v(" "),a("p",[e._v("memory와 같이 제한할 수 있는 것은 CPU와 Storage가 있다.")]),e._v(" "),a("p",[e._v("또 Objects의 숫자도 제한할 수 있다.")]),e._v(" "),a("p",[e._v("제한할 수 있는 Resource와 Object 목록")]),e._v(" "),a("blockquote",[a("p",[e._v("모든 Object를 제한할 수 있는 것은 아니고 Kubernetes가 업데이트 될 때마다"),a("br"),e._v("\n종류가 많아지고 있다. 확인을 해보고 사용하도록 하자.")])]),e._v(" "),a("h2",{attrs:{id:"_3-limitrange"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-limitrange"}},[e._v("#")]),e._v(" 3. LimitRange")])])}),[],!1,null,null,null);a.default=_.exports}}]);