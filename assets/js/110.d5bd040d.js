(window.webpackJsonp=window.webpackJsonp||[]).push([[110],{753:function(a,t,s){"use strict";s.r(t);var e=s(12),r=Object(e.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"kafka-quick-start"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#kafka-quick-start"}},[a._v("#")]),a._v(" Kafka Quick Start")]),a._v(" "),t("p",[a._v("실습 환경")]),a._v(" "),t("ul",[t("li",[a._v("💡 Java10 (Java 8이상 필수)")]),a._v(" "),t("li",[a._v("💡 Windows 10")]),a._v(" "),t("li",[a._v("💡 Git Bash")]),a._v(" "),t("li",[a._v("💡 Kafka 2.6.0")])]),a._v(" "),t("hr"),a._v(" "),t("p",[a._v("앞서 간단한 properties 설정도 모두 살펴보았고 실행하는 방법도 알아보았다.")]),a._v(" "),t("p",[a._v("이제 "),t("a",{attrs:{href:"https://kafka.apache.org/quickstart",target:"_blank",rel:"noopener noreferrer"}},[a._v("APACHE KAFKA QUICKSTART 공식문서"),t("OutboundLink")],1),a._v("를 따라 Kafka 기능을 사용해보자.")]),a._v(" "),t("h2",{attrs:{id:"_1-빠르게-zookeeper-kafka-server-실행"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-빠르게-zookeeper-kafka-server-실행"}},[a._v("#")]),a._v(" 1. 빠르게 zookeeper, kafka server 실행")]),a._v(" "),t("div",{staticClass:"language-python extra-class"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# yj_park@yjpark MINGW64 /c/dev/kafka_2.13-2.6.0")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# zookeeper 실행")]),a._v("\n$ "),t("span",{pre:!0,attrs:{class:"token builtin"}},[a._v("bin")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("windows"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("zookeeper"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("server"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("start"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("bat config"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("zookeeper"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("properties\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# kafka server 실행")]),a._v("\n$ "),t("span",{pre:!0,attrs:{class:"token builtin"}},[a._v("bin")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("windows"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("kafka"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("server"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("start"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("bat config"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("server"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("properties\n")])])]),t("h2",{attrs:{id:"_2-topic-생성하기"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-topic-생성하기"}},[a._v("#")]),a._v(" 2. Topic 생성하기")]),a._v(" "),t("p",[a._v("용어는 이전 포스팅에서 살펴보았으니 간단한 원리만 살펴보자.")]),a._v(" "),t("ul",[t("li",[a._v("Kafka는 이벤트(또는 메시지)를 읽고, 쓰고, 저장하고, 처리 할 수 있는 분산 이벤트 스트리밍 플랫폼")]),a._v(" "),t("li",[a._v("이벤트 예시(배송 주문, 센서, 결제  처리, App Push 알림, 메일 보내기 등)")]),a._v(" "),t("li",[a._v("이런 이벤트를 Topic 별로  구성 및 저장!")])]),a._v(" "),t("blockquote",[t("p",[a._v("간단한 Topic은 파일 시스템의 폴더, Event는 파일로 이해하면 편하다.\n그러니, Event(파일) 생성 전에 Topic(폴더)을 먼저 생성해보자.😊")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# yj_park@yjpark MINGW64 /c/dev/kafka_2.13-2.6.0")]),a._v("\n$ ."),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("bin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("windows"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("kafka-topics.bat "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--create")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--topic")]),a._v(" quickstart-events --bootstrap-server localhost:9092\n")])])]),t("ol",[t("li",[t("strong",[a._v("--create")]),a._v(" "),t("ul",[t("li",[a._v("새로운 토픽을 만들 때 사용하는 옵션")])])]),a._v(" "),t("li",[t("strong",[a._v("--topic")]),a._v(" "),t("ul",[t("li",[a._v("create, alter, describe, delete 옵션에 사용할 Topic 명")]),a._v(" "),t("li",[a._v('Topic 이름은 큰따옴표(")로 묶을 수 있고, 정규식 사용이 가능( \\로 escape)')])])]),a._v(" "),t("li",[t("strong",[a._v("--bootstrap-server")]),a._v(" "),t("ul",[t("li",[a._v("연결할 Kafka 서버( host:port )")]),a._v(" "),t("li",[a._v("이 옵션이 추가되면, 직접 Zookeeper에 연결하지 않아도 된다.")])])]),a._v(" "),t("li",[a._v("(추가옵션) -"),t("strong",[a._v("-replication-factor")]),a._v(" "),t("ul",[t("li",[a._v("Partition 복제 수")]),a._v(" "),t("li",[a._v("기본 값은 server.properties 파일에서 default.replication.factor 항목으로 설정 가능( 설정되어 있지 않을 경우, 추가 작성)")])])]),a._v(" "),t("li",[a._v("(추가옵션) "),t("strong",[a._v("--partitions")]),a._v(" "),t("ul",[t("li",[a._v("Topic이 생성되거나 변경될 때의 Partition 수")]),a._v(" "),t("li",[a._v("기본 값은 server.properties 파일에서 num.partitions 항목으로 설정 가능")])])])]),a._v(" "),t("h3",{attrs:{id:"_2-1-topic-생성-옵션-확인하기"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-topic-생성-옵션-확인하기"}},[a._v("#")]),a._v(" 2-1. Topic 생성 옵션 확인하기")]),a._v(" "),t("p",[t("code",[a._v("--help 옵션")])]),a._v(" "),t("p",[a._v("더 자세한 Topic 관련 옵션을 확인하려면 "),t("strong",[a._v("help 명령어")]),a._v("를 입력해보자.")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# yj_park@yjpark MINGW64 /c/dev/kafka_2.13-2.6.0")]),a._v("\n$ ."),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("bin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("windows"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("kafka-topics.bat "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--help")]),a._v("\n")])])]),t("h3",{attrs:{id:"_2-2-현재-사용-정보-확인하기"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-현재-사용-정보-확인하기"}},[a._v("#")]),a._v(" 2-2. 현재 사용 정보 확인하기")]),a._v(" "),t("p",[t("code",[a._v("--describe 옵션")])]),a._v(" "),t("ul",[t("li",[a._v("새로운 Topic의 PartitionCount와 같은 세부 정보 표시하는 예시")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ ."),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("bin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("windows"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("kafka-topics.bat "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--describe")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--topic")]),a._v(" quickstart-events --bootstrap-server localhost:9092\nTopic:quickstart-events  PartitionCount:1    ReplicationFactor:1 Configs:\n    Topic: quickstart-events Partition: "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("    Leader: "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("   Replicas: "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(" Isr: "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("\n")])])]),t("h3",{attrs:{id:"_2-3-topic-목록-확인하기"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-topic-목록-확인하기"}},[a._v("#")]),a._v(" 2-3. Topic 목록 확인하기")]),a._v(" "),t("p",[t("code",[a._v("--list 옵션")])]),a._v(" "),t("ul",[t("li",[a._v("사용 가능한 Topic 목록을 확인할 수 있다.")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ ."),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("bin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("windows"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("kafka-topics.bat "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--list")]),a._v(" --bootstrap-server localhost:9092\n")])])]),t("h3",{attrs:{id:"_2-4-topic-삭제하기"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-topic-삭제하기"}},[a._v("#")]),a._v(" 2-4. Topic 삭제하기")]),a._v(" "),t("p",[t("code",[a._v("--delete 옵션")])]),a._v(" "),t("ul",[t("li",[a._v("Topic을 삭제하려면 "),t("strong",[a._v("server.properties")]),a._v(" 파일에서 "),t("strong",[a._v("delete.topic.enable=true")]),a._v(" 설정을 추가해줘야 한다. (서버 재시작 필요)")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ ."),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("bin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("windows"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("kafka-topics.bat "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--delete")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--topic")]),a._v(" quickstart-events --bootstrap-server localhost:9092\n")])])]),t("h2",{attrs:{id:"_3-producer"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-producer"}},[a._v("#")]),a._v(" 3. Producer")]),a._v(" "),t("h3",{attrs:{id:"_3-1-event-메시지-생성하기"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-event-메시지-생성하기"}},[a._v("#")]),a._v(" 3-1. Event(메시지) 생성하기")]),a._v(" "),t("p",[a._v("Topic을 생성했으니 Event를 만들어보자!")]),a._v(" "),t("ul",[t("li",[a._v("Kafka 클라이언트는 Event를 읽거나 쓸 때 네트워크를 통해 Kafka Broker와 통신한다.")]),a._v(" "),t("li",[a._v("Event가 수신되면 Broker는 Event를 저장")])]),a._v(" "),t("p",[a._v("Producer는 Kafka Queue에 정보를 저장해준다.\nMessage(= Event)를 만들어서 Topic으로 보내보자.")]),a._v(" "),t("blockquote",[t("p",[a._v("Broker는 Kafka 애플리케이션이 설치되어 있는 서버 또는 노드이다.")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ ."),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("bin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("windows"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("kafka-console-producer.bat "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--topic")]),a._v(" quickstart-events --bootstrap-server localhost:9092 \n"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" This is my first event\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" jun108059\n")])])]),t("ul",[t("li",[a._v("메시지 두개가 생성됐다.")]),a._v(" "),t("li",[a._v("종료하려면 "),t("strong",[a._v("ctrl + c")]),a._v(" 를 누르면 된다.")])]),a._v(" "),t("h3",{attrs:{id:"_3-2-producer-관련-옵션-한번에-보기"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-producer-관련-옵션-한번에-보기"}},[a._v("#")]),a._v(" 3-2. Producer 관련 옵션 한번에 보기")]),a._v(" "),t("p",[t("code",[a._v("--help 옵션")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ ."),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("bin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("windows"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("kafka-console-producer.bat "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--help")]),a._v("\n")])])]),t("h2",{attrs:{id:"_4-consumer"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-consumer"}},[a._v("#")]),a._v(" 4. Consumer")]),a._v(" "),t("h3",{attrs:{id:"_4-1-event-메시지-읽기-소비하기"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-event-메시지-읽기-소비하기"}},[a._v("#")]),a._v(" 4-1. Event(메시지) 읽기(소비하기)")]),a._v(" "),t("ul",[t("li",[a._v("생성된 메시지를 옵션을 통해 여러가지 방법으로 소비할 수 있다.")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ ."),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("bin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("windows"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("kafka-console-consumer.bat "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--topic")]),a._v(" quickstart-events --from-beginning --bootstrap-server localhost:9092 \nThis is my first event\njun108059\n")])])]),t("p",[t("code",[a._v("--from-beginning 옵션")])]),a._v(" "),t("ul",[t("li",[a._v("Consumer에게 설정된 offset이 없으므로 가장 최신의 메시지 대신 가장 먼저 도착한 메시지부터 읽도록 하는 옵션")])]),a._v(" "),t("h3",{attrs:{id:"_4-2-consumer-관련-옵션-한번에-보기"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-consumer-관련-옵션-한번에-보기"}},[a._v("#")]),a._v(" 4-2. Consumer 관련 옵션 한번에 보기")]),a._v(" "),t("p",[t("code",[a._v("--help 옵션")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ ."),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("bin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("windows"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("kafka-console-consumer.bat "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--help")]),a._v("\n")])])]),t("p",[a._v("Kafka에서 간단하게 Topic을 만들고 Event를 생성하고 소비해보았다.")]),a._v(" "),t("p",[a._v("이제 Spring boot에 연동해서 Kafka를 사용하는 포스팅을 할 예정이다.")]),a._v(" "),t("p",[t("strong",[a._v("Reference")])]),a._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://kafka.apache.org/quickstart",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://kafka.apache.org/quickstart"),t("OutboundLink")],1)]),a._v(" "),t("li",[t("a",{attrs:{href:"https://kafka.apache.org/documentation/#configuration",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://kafka.apache.org/documentation/#configuration"),t("OutboundLink")],1)]),a._v(" "),t("li",[t("a",{attrs:{href:"https://victorydntmd.tistory.com/345",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://victorydntmd.tistory.com/345"),t("OutboundLink")],1)])])])}),[],!1,null,null,null);t.default=r.exports}}]);